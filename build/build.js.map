{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/Binding.js","src/Compiler.js","src/Depend.js","src/Observer.js","src/Parser.js","src/Updater.js","src/Watcher.js"],"names":[],"mappings":"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","file":"build.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","/**\n * Bind.js\n *\n * Created by xiepan on 2017/1/9 上午11:50.\n */\nimport createCompiler from \"./Compiler\";\nimport createObserver from \"./Observer\";\nimport Watcher from \"./Watcher\";\n\nwindow.Binding = Binding\n\n/**\n * 构造函数入口\n *\n * @param options [数据参数对象]\n * @constructor\n */\nfunction Binding(options) {\n    console.log('Binding 正在启动...')\n    console.log('数据参数对象:', options)\n    this.$options = options\n    this.$data = options.data\n\n    var el = document.querySelector(this.$options.el)\n\n    if (!el) {\n        console.error('[Binding warn] ' + this.$options.el + ' is not exist')\n        return\n    }\n\n    // 初始化\n    this._init(el)\n    // 创建数据监听器(观察者)\n    createObserver(this.$data)\n    // 创建编译模块\n    createCompiler(options, this)\n}\n\nvar proto = Binding.prototype\n\nproto._init = function (el) {\n    var _this = this\n\n    this.$options.el = el\n\n    Object.keys(_this.$data).forEach(function (key) {\n        _this._proxy(key)\n    })\n}\nproto.$watch = function (key, cb) {\n    new Watcher(this, key, cb)\n}\n\n// 代理 this.$data.msg => this.msg\nproto._proxy = function (key) {\n    console.log('[Binding.prototype] proxy')\n    var _this = this\n    Object.defineProperty(_this, key,\n        {\n            configurable: false,\n            enumerable: true,\n            get: function () {\n                return _this.$data[key]\n            },\n            set: function (newVal) {\n                _this.$data[key] = newVal\n            }\n        }\n    )\n}\n","/**\n * compile.js\n *\n * 编译模块\n *\n * Created by xiepan on 2017/1/9 上午10:12.\n */\nimport Parsers from \"./Parser\";\n\nfunction Compiler(options, vm) {\n    console.log('正在创建[指令解析器]...')\n    console.log('数据参数对象:', options, 'Binding 实例', vm)\n\n    var el = options.el\n    this.$el = isElementNode(el) ? el : document.querySelector(el)\n    this.$data = options.$data\n    this.$vm = vm\n    this.mount()\n}\n\nCompiler.prototype = {\n    mount: function () {\n        var fragment = node2Fragment(this.$el)\n        this.compile(fragment)\n        this.$el.appendChild(fragment)\n    },\n\n    compile: function (el) {\n        console.log('[Compiler.prototype] 开始解析(compile)', el)\n        // Node.childNodes 返回包含指定节点的子节点的集合\n        // https://developer.mozilla.org/zh-CN/docs/Web/API/Node/childNodes\n        // ParentNode.children 是一个只读属性，返回一个包含当前元素的子元素的集合\n        // https://developer.mozilla.org/zh-CN/docs/Web/API/ParentNode/children\n        var childNodes = el.childNodes,\n            _this = this\n        Array.prototype.slice.call(childNodes).forEach(function (node) {\n            var text = node.textContent\n            var mustacheRe = /\\{\\{(.*)\\}\\}/\n\n            // 元素\n            if (isElementNode(node)) {\n                _this.parse(node)\n                // 文本\n            } else if (isTextNode(node) && mustacheRe.test(text)) {\n                _this.parseText(node, RegExp.$1)\n            }\n            // 子节点\n            if (node.childNodes && node.childNodes.length > 0) {\n                _this.compile(node)\n            }\n        })\n    },\n    /**\n     * 解析元素节点\n     *\n     * @param node\n     */\n    parse: function (node) {\n        console.log('[Compiler.prototype] 解析元素节点(parse)')\n        var nodeAttrs = node.attributes,\n            _this = this\n\n        // 处理指令\n        Array.prototype.slice.call(nodeAttrs).forEach(function (attr) {\n            var attrName = attr.name\n            if (isDirective(attrName)) {\n                // 指令值\n                var expression = attr.value\n                // 指令类型\n                var directive = attrName.substring(2);\n                // 是事件指令\n                if (isEventDirective(directive)) {\n                    Parsers._eventHandler(node, _this.$vm, expression, directive)\n                } else {\n                    // 其他指令\n                    if (Parsers[directive]) {\n                        Parsers[directive](node, _this.$vm, expression)\n                    } else {\n                        console.error('[Binding error] v-' + directive + ' is not supported')\n                    }\n                }\n            }\n        })\n    },\n    parseText: function (node, exp) {\n        console.log('[Compiler.prototype] 解析元素节点(parseText)')\n        Parsers.text(node, this.$vm, exp)\n    }\n}\n\n\n/**\n * element 的子节点转换成文档片段\n *\n * DocumentFragments 是一些DOM节点。它们不是DOM树的一部分。\n * 在DOM树中，文档片段会被替换为它所有的子元素。\n * 因为文档片段存在与内存中，并不在DOM树中，\n * 所以将子元素插入到文档片段时不会引起页面回流(reflow)(对元素位置和几何上的计算)，可以优化性能。\n *\n * @param el\n * @returns {DocumentFragment}\n */\nfunction node2Fragment(el) {\n    var fragment = document.createDocumentFragment()\n    var child\n    while (child = el.firstChild) {\n        fragment.appendChild(child);\n    }\n    return fragment\n}\n\n/**\n * 是否是指令\n *\n * @param attrName\n * @returns {boolean}\n */\nfunction isDirective(attrName) {\n    return attrName.indexOf('v-') === 0\n}\n/**\n * 是否是事件指令\n *\n * @param attrName\n * @returns {boolean}\n */\nfunction isEventDirective(attrName) {\n    return attrName.indexOf('on') === 0\n}\n/**\n * 是否是元素节点\n * https://developer.mozilla.org/zh-CN/docs/Web/API/Node/nodeType\n *\n * @param node\n * @returns {boolean}\n */\nfunction isElementNode(node) {\n    return node && node.nodeType === 1\n}\n/**\n * 是否是文本节点\n *\n * @param node\n * @returns {boolean}\n */\nfunction isTextNode(node) {\n    return node && node.nodeType === 3\n}\n\nexport default function createCompiler(options, vm) {\n    new Compiler(options, vm)\n}\n","/**\n * Depend.js\n *\n * 依赖收集模块, 订阅者管理器\n *\n * 每个数据拥有一个 Depend 依赖收集器，\n * 用于维护 watchers (订阅者)数组，数据变动触发 notify 方法，\n * 再调用 watchers 的 update 方法\n *\n * Created by xiepan on 2017/1/9 下午3:52.\n */\n\nvar id = 0;\n\nexport default function Depend(key) {\n    console.log('正在创建[依赖收集器]...', 'key', key)\n    this.id = id++\n    // 订阅者数组\n    this.watchers = []\n    this.key = key\n}\n\nDepend.prototype = {\n    /**\n     * 添加订阅者\n     *\n     * @param watcher\n     */\n    addWatcher: function (watcher) {\n        console.log('[Depend.prototype] addWatcher')\n        console.log(this.watchers)\n        this.watchers.push(watcher)\n    },\n    /**\n     * 通知所有 Watcher 并触发回调函数\n     */\n    notify: function () {\n        console.log('[Depend.prototype] notify')\n        console.log('watchers', this.watchers)\n        this.watchers.forEach(function (watcher) {\n            watcher.update()\n        })\n    }\n}","/**\n * observer.js\n *\n * 数据监听模块(观察者)\n *\n * Created by xiepan on 2017/1/6 下午4:04.\n */\nimport Depend from \"./Depend\";\n\n/**\n * 创建数据监听器\n *\n * @param value\n * @returns {Observer}\n */\nexport default function createObserver(data) {\n    if (data) {\n        return new Observer(data)\n    }\n}\n\nfunction Observer(data) {\n    // 监听对象的变化\n    if (typeof data === 'object') {\n        console.log('正在创建[事件监听器]...')\n        console.log('被监听数据：', data)\n        this.observeObj(data)\n    }\n}\n\nObserver.prototype = {\n    /**\n     * 监听对象的变化\n     *\n     * @param data\n     */\n    observeObj: function (data) {\n        console.log('[Observer.prototype] observeObj')\n        var _this = this\n        // 取出data中的所有属性\n        Object.keys(data).forEach(function (key) {\n            _this.observe(data, key, data[key])\n        })\n    },\n    /**\n     * 检测对象的变化 & 依赖收集\n     *\n     * @param data\n     * @param key\n     * @param val\n     */\n    observe: function (data, key, val) {\n        var dep = new Depend(key)\n        // 嵌套对象\n        var childObj = createObserver(val)\n        Object.defineProperty(data, key, {\n            enumerable: true,\n            configurable: false,\n            get: function () {\n                // 如果当前有 Watcher 就将该 Watcher 绑定到当前的数据上\n                if (Depend.watcher) {\n                    Depend.watcher.addDepend(dep)\n                }\n                return val\n            },\n            set: function (newVal) {\n                if (newVal === val) {\n                    return\n                }\n                val = newVal\n                childObj = createObserver(newVal)\n                // 通知所有订阅者\n                dep.notify()\n            }\n        })\n    }\n}\n\n","/**\n * Parser.js\n *\n * 指令解析模块(v-text,v-html,v-model,v-class,v-on)\n *\n * Created by xiepan on 2017/1/10 下午1:25.\n */\nimport Updater from \"./Updater\";\nimport Watcher from \"./Watcher\";\n\n\nvar Parsers = {\n    text: function (node, vm, exp) {\n        // console.log('[Compiler DirectiveParsers] text')\n        this._bind(node, vm, exp, 'text')\n    },\n    html: function (node, vm, exp) {\n        // console.log('[Compiler DirectiveParsers] html')\n        this._bind(node, vm, exp, 'html')\n    },\n    model: function (node, vm, exp) {\n        // console.log('[Compiler DirectiveParsers] model')\n        this._bind(node, vm, exp, 'model')\n\n        var _this = this,\n            val = this._getValue(vm, exp)\n        node.addEventListener('input', function (e) {\n            var newVal = e.target.value\n            if (val === newVal) {\n                return\n            }\n            _this._setValue(vm, exp, newVal)\n            val = newVal\n        })\n    },\n    class: function (node, vm, exp) {\n        this._bind(node, vm, exp, 'class')\n    },\n    /**\n     * 调用 Updater 视图刷新模块并为其创建数据订阅模块\n     * @param node\n     * @param vm\n     * @param exp\n     * @param dir\n     * @private\n     */\n    _bind: function (node, vm, exp, dir) {\n        // 数据更新函数\n        var updaterFn = Updater[dir]\n\n        if (updaterFn) {\n            //{node,value}\n            // 初始化视图\n            updaterFn(node, this._getValue(vm, exp))\n            // 创建数据订阅器订阅数据变化，更新视图\n            new Watcher(vm, exp, function (val, oldVal) {\n                updaterFn(node, val, oldVal)\n            })\n        }\n    },\n    /**\n     * 事件处理\n     *\n     * @param node 节点\n     * @param vm Binding实例\n     * @param exp 方法名\n     * @param dir 指令名称(如：on:click)\n     */\n    _eventHandler: function (node, vm, exp, dir) {\n        console.log('[Compiler DirectiveParsers] eventHandler')\n        // 事件类型，如 click 事件\n        var eventType = dir.split(':')[1]\n        // 绑定的方法\n        var fn = vm.$options.methods && vm.$options.methods[exp]\n\n        // 添加事件监听器\n        if (eventType && fn) {\n            node.addEventListener(eventType, fn.bind(vm), false)\n        } else {\n            if (!eventType) {\n                console.error('[Binding error] eventType after : is not defined')\n            } else {\n                console.error('[Binding error] event\\'s function or function name is not defined')\n            }\n        }\n    },\n    _getValue: function (vm, exp) {\n        // console.log('[Compiler DirectiveParsers] _getVMVal')\n        var val = vm.$data\n        exp = exp.split('.')\n        exp.forEach(function (k) {\n            val = val[k]\n        })\n        return val\n    },\n\n    _setValue: function (vm, exp, value) {\n        // console.log('[Compiler DirectiveParsers] _setVMVal')\n        var val = vm.$data\n        exp = exp.split('.')\n        exp.forEach(function (k, i) {\n            if (i < exp.length - 1) {\n                val = val[k]\n            } else {\n                val[k] = value\n            }\n        })\n    }\n}\n\nexport default Parsers","/**\n * Updater.js\n *\n * 视图刷新模块\n *\n * Created by xiepan on 2017/1/9 下午4:59.\n */\n\nvar Updater = {\n    text: function (node, value) {\n        console.log('[Updater] v-text', value)\n        node.textContent = typeof value == 'undefined' ? '' : value\n    },\n    html: function (node, value) {\n        console.log('[Updater] v-html', node, value)\n        node.innerHTML = typeof value == 'undefined' ? '' : value\n    },\n    class: function (node, value, oldValue) {\n        console.log('[Updater] v-class', node, oldValue, '->', value)\n        var className = node.className\n        className = className.replace(oldValue, '').replace(/\\s$/, '')\n\n        var space = className && String(value) ? ' ' : ''\n        node.className = className + space + value\n    },\n    model: function (node, value) {\n        console.log('[Updater] v-model', node, value)\n        node.value = typeof value == 'undefined' ? '' : value\n    }\n}\n\nexport default Updater\n","/**\n * Watcher.js (subscriber)\n *\n * 数据订阅模块（订阅者）\n *\n * Created by xiepan on 2017/1/9 下午1:39.\n */\nimport Depend from \"./Depend\";\n\nexport default function Watcher(vm, exp, callback) {\n    console.log('正在创建[数据订阅器]...', 'vm:', vm, ' expression:', exp, ' callback:', callback)\n\n    this.vm = vm\n    // 数据更新回调函数\n    this.callback = callback\n    // 表达式\n    this.expression = exp\n    // 依赖 id\n    this.depIds = {}\n    this.value = this._getValue()\n}\n// 1. 每次调用update()的时候会触发相应属性的getter\n// getter里面会触发dep.depend()，继而触发这里的addDepend\n\n// 2. 假如相应属性的dep.id已经在当前watcher的depIds里，说明不是一个新的属性，仅仅是改变了其值而已\n// 则不需要将当前watcher添加到该属性的dep里\n\n// 3. 假如相应属性是新的属性，则将当前watcher添加到新属性的dep里\n// 如通过 vm.child = {name: 'a'} 改变了 child.name 的值，child.name 就是个新属性\n// 则需要将当前watcher(child.name)加入到新的 child.name 的dep里\n// 因为此时 child.name 是个新值，之前的 setter、dep 都已经失效，如果不把 watcher 加入到新的 child.name 的dep中\n// 通过 child.name = xxx 赋值的时候，对应的 watcher 就收不到通知，等于失效了\n\n// 4. 每个子属性的watcher在添加到子属性的dep的同时，也会添加到父属性的dep\n// 监听子属性的同时监听父属性的变更，这样，父属性改变时，子属性的watcher也能收到通知进行update\n// 这一步是在 _getValue 里面完成，forEach时会从父级开始取值，间接调用了它的getter\n// 触发了addDepend(), 在整个forEach过程，当前watcher都会加入到每个父级过程属性的dep\n// 例如：当前watcher的是'child.child.name', 那么child, child.child, child.child.name这三个属性的dep都会加入当前watcher\nWatcher.prototype = {\n    update: function () {\n        console.log('[Watcher.prototype] update')\n        var value = this._getValue()\n        var oldValue = this.value\n        if (value !== oldValue) {\n            console.log('[Watcher.prototype] value:', oldValue, '->', value)\n            this.value = value\n            this.callback.call(this.vm, value, oldValue)\n        }\n    },\n    addDepend: function (dep) {\n        console.log('[Watcher.prototype] addDepend')\n        if (!this.depIds.hasOwnProperty(dep.id)) {\n            dep.addWatcher(this)\n            this.depIds[dep.id] = dep\n        }\n        console.log('[Watcher.prototype] addDepend', this)\n    },\n    _getValue: function () {\n\n        Depend.watcher = this\n\n        var exp = this.expression.split('.')\n        var val = this.vm.$data\n        exp.forEach(function (k) {\n            val = val[k]\n        })\n\n        Depend.watcher = null\n\n        return val\n    }\n}"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvQmluZGluZy5qcyIsInNyYy9Db21waWxlci5qcyIsInNyYy9EZXBlbmQuanMiLCJzcmMvT2JzZXJ2ZXIuanMiLCJzcmMvUGFyc2VyLmpzIiwic3JjL1VwZGF0ZXIuanMiLCJzcmMvV2F0Y2hlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7O0FDS0E7Ozs7QUFDQTs7OztBQUNBOzs7Ozs7QUFFQSxPQUFPLE9BQVAsR0FBaUIsT0FBakI7O0FBRUE7Ozs7OztBQVhBOzs7OztBQWlCQSxTQUFTLE9BQVQsQ0FBaUIsT0FBakIsRUFBMEI7QUFDdEIsWUFBUSxHQUFSLENBQVksaUJBQVo7QUFDQSxZQUFRLEdBQVIsQ0FBWSxTQUFaLEVBQXVCLE9BQXZCO0FBQ0EsU0FBSyxRQUFMLEdBQWdCLE9BQWhCO0FBQ0EsU0FBSyxLQUFMLEdBQWEsUUFBUSxJQUFyQjs7QUFFQSxRQUFJLEtBQUssU0FBUyxhQUFULENBQXVCLEtBQUssUUFBTCxDQUFjLEVBQXJDLENBQVQ7O0FBRUEsUUFBSSxDQUFDLEVBQUwsRUFBUztBQUNMLGdCQUFRLEtBQVIsQ0FBYyxvQkFBb0IsS0FBSyxRQUFMLENBQWMsRUFBbEMsR0FBdUMsZUFBckQ7QUFDQTtBQUNIOztBQUVEO0FBQ0EsU0FBSyxLQUFMLENBQVcsRUFBWDtBQUNBO0FBQ0EsNEJBQWUsS0FBSyxLQUFwQjtBQUNBO0FBQ0EsNEJBQWUsT0FBZixFQUF3QixJQUF4QjtBQUNIOztBQUVELElBQUksUUFBUSxRQUFRLFNBQXBCOztBQUVBLE1BQU0sS0FBTixHQUFjLFVBQVUsRUFBVixFQUFjO0FBQ3hCLFFBQUksUUFBUSxJQUFaOztBQUVBLFNBQUssUUFBTCxDQUFjLEVBQWQsR0FBbUIsRUFBbkI7O0FBRUEsV0FBTyxJQUFQLENBQVksTUFBTSxLQUFsQixFQUF5QixPQUF6QixDQUFpQyxVQUFVLEdBQVYsRUFBZTtBQUM1QyxjQUFNLE1BQU4sQ0FB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ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCIvKipcbiAqIEJpbmQuanNcbiAqXG4gKiBDcmVhdGVkIGJ5IHhpZXBhbiBvbiAyMDE3LzEvOSDkuIrljYgxMTo1MC5cbiAqL1xuaW1wb3J0IGNyZWF0ZUNvbXBpbGVyIGZyb20gXCIuL0NvbXBpbGVyXCI7XG5pbXBvcnQgY3JlYXRlT2JzZXJ2ZXIgZnJvbSBcIi4vT2JzZXJ2ZXJcIjtcbmltcG9ydCBXYXRjaGVyIGZyb20gXCIuL1dhdGNoZXJcIjtcblxud2luZG93LkJpbmRpbmcgPSBCaW5kaW5nXG5cbi8qKlxuICog5p6E6YCg5Ye95pWw5YWl5Y+jXG4gKlxuICogQHBhcmFtIG9wdGlvbnMgW+aVsOaNruWPguaVsOWvueixoV1cbiAqIEBjb25zdHJ1Y3RvclxuICovXG5mdW5jdGlvbiBCaW5kaW5nKG9wdGlvbnMpIHtcbiAgICBjb25zb2xlLmxvZygnQmluZGluZyDmraPlnKjlkK/liqguLi4nKVxuICAgIGNvbnNvbGUubG9nKCfmlbDmja7lj4LmlbDlr7nosaE6Jywgb3B0aW9ucylcbiAgICB0aGlzLiRvcHRpb25zID0gb3B0aW9uc1xuICAgIHRoaXMuJGRhdGEgPSBvcHRpb25zLmRhdGFcblxuICAgIHZhciBlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy4kb3B0aW9ucy5lbClcblxuICAgIGlmICghZWwpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignW0JpbmRpbmcgd2Fybl0gJyArIHRoaXMuJG9wdGlvbnMuZWwgKyAnIGlzIG5vdCBleGlzdCcpXG4gICAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIOWIneWni+WMllxuICAgIHRoaXMuX2luaXQoZWwpXG4gICAgLy8g5Yib5bu65pWw5o2u55uR5ZCs5ZmoKOinguWvn+iAhSlcbiAgICBjcmVhdGVPYnNlcnZlcih0aGlzLiRkYXRhKVxuICAgIC8vIOWIm+W7uue8luivkeaooeWdl1xuICAgIGNyZWF0ZUNvbXBpbGVyKG9wdGlvbnMsIHRoaXMpXG59XG5cbnZhciBwcm90byA9IEJpbmRpbmcucHJvdG90eXBlXG5cbnByb3RvLl9pbml0ID0gZnVuY3Rpb24gKGVsKSB7XG4gICAgdmFyIF90aGlzID0gdGhpc1xuXG4gICAgdGhpcy4kb3B0aW9ucy5lbCA9IGVsXG5cbiAgICBPYmplY3Qua2V5cyhfdGhpcy4kZGF0YSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIF90aGlzLl9wcm94eShrZXkpXG4gICAgfSlcbn1cbnByb3RvLiR3YXRjaCA9IGZ1bmN0aW9uIChrZXksIGNiKSB7XG4gICAgbmV3IFdhdGNoZXIodGhpcywga2V5LCBjYilcbn1cblxuLy8g5Luj55CGIHRoaXMuJGRhdGEubXNnID0+IHRoaXMubXNnXG5wcm90by5fcHJveHkgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgY29uc29sZS5sb2coJ1tCaW5kaW5nLnByb3RvdHlwZV0gcHJveHknKVxuICAgIHZhciBfdGhpcyA9IHRoaXNcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoX3RoaXMsIGtleSxcbiAgICAgICAge1xuICAgICAgICAgICAgY29uZmlndXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuJGRhdGFba2V5XVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKG5ld1ZhbCkge1xuICAgICAgICAgICAgICAgIF90aGlzLiRkYXRhW2tleV0gPSBuZXdWYWxcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIClcbn1cbiIsIi8qKlxuICogY29tcGlsZS5qc1xuICpcbiAqIOe8luivkeaooeWdl1xuICpcbiAqIENyZWF0ZWQgYnkgeGllcGFuIG9uIDIwMTcvMS85IOS4iuWNiDEwOjEyLlxuICovXG5pbXBvcnQgUGFyc2VycyBmcm9tIFwiLi9QYXJzZXJcIjtcblxuZnVuY3Rpb24gQ29tcGlsZXIob3B0aW9ucywgdm0pIHtcbiAgICBjb25zb2xlLmxvZygn5q2j5Zyo5Yib5bu6W+aMh+S7pOino+aekOWZqF0uLi4nKVxuICAgIGNvbnNvbGUubG9nKCfmlbDmja7lj4LmlbDlr7nosaE6Jywgb3B0aW9ucywgJ0JpbmRpbmcg5a6e5L6LJywgdm0pXG5cbiAgICB2YXIgZWwgPSBvcHRpb25zLmVsXG4gICAgdGhpcy4kZWwgPSBpc0VsZW1lbnROb2RlKGVsKSA/IGVsIDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlbClcbiAgICB0aGlzLiRkYXRhID0gb3B0aW9ucy4kZGF0YVxuICAgIHRoaXMuJHZtID0gdm1cbiAgICB0aGlzLm1vdW50KClcbn1cblxuQ29tcGlsZXIucHJvdG90eXBlID0ge1xuICAgIG1vdW50OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBmcmFnbWVudCA9IG5vZGUyRnJhZ21lbnQodGhpcy4kZWwpXG4gICAgICAgIHRoaXMuY29tcGlsZShmcmFnbWVudClcbiAgICAgICAgdGhpcy4kZWwuYXBwZW5kQ2hpbGQoZnJhZ21lbnQpXG4gICAgfSxcblxuICAgIGNvbXBpbGU6IGZ1bmN0aW9uIChlbCkge1xuICAgICAgICBjb25zb2xlLmxvZygnW0NvbXBpbGVyLnByb3RvdHlwZV0g5byA5aeL6Kej5p6QKGNvbXBpbGUpJywgZWwpXG4gICAgICAgIC8vIE5vZGUuY2hpbGROb2RlcyDov5Tlm57ljIXlkKvmjIflrproioLngrnnmoTlrZDoioLngrnnmoTpm4blkIhcbiAgICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvemgtQ04vZG9jcy9XZWIvQVBJL05vZGUvY2hpbGROb2Rlc1xuICAgICAgICAvLyBQYXJlbnROb2RlLmNoaWxkcmVuIOaYr+S4gOS4quWPquivu+WxnuaAp++8jOi/lOWbnuS4gOS4quWMheWQq+W9k+WJjeWFg+e0oOeahOWtkOWFg+e0oOeahOmbhuWQiFxuICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy96aC1DTi9kb2NzL1dlYi9BUEkvUGFyZW50Tm9kZS9jaGlsZHJlblxuICAgICAgICB2YXIgY2hpbGROb2RlcyA9IGVsLmNoaWxkTm9kZXMsXG4gICAgICAgICAgICBfdGhpcyA9IHRoaXNcbiAgICAgICAgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoY2hpbGROb2RlcykuZm9yRWFjaChmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgICAgdmFyIHRleHQgPSBub2RlLnRleHRDb250ZW50XG4gICAgICAgICAgICB2YXIgbXVzdGFjaGVSZSA9IC9cXHtcXHsoLiopXFx9XFx9L1xuXG4gICAgICAgICAgICAvLyDlhYPntKBcbiAgICAgICAgICAgIGlmIChpc0VsZW1lbnROb2RlKG5vZGUpKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMucGFyc2Uobm9kZSlcbiAgICAgICAgICAgICAgICAvLyDmlofmnKxcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNUZXh0Tm9kZShub2RlKSAmJiBtdXN0YWNoZVJlLnRlc3QodGV4dCkpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5wYXJzZVRleHQobm9kZSwgUmVnRXhwLiQxKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8g5a2Q6IqC54K5XG4gICAgICAgICAgICBpZiAobm9kZS5jaGlsZE5vZGVzICYmIG5vZGUuY2hpbGROb2Rlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuY29tcGlsZShub2RlKVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH0sXG4gICAgLyoqXG4gICAgICog6Kej5p6Q5YWD57Sg6IqC54K5XG4gICAgICpcbiAgICAgKiBAcGFyYW0gbm9kZVxuICAgICAqL1xuICAgIHBhcnNlOiBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICBjb25zb2xlLmxvZygnW0NvbXBpbGVyLnByb3RvdHlwZV0g6Kej5p6Q5YWD57Sg6IqC54K5KHBhcnNlKScpXG4gICAgICAgIHZhciBub2RlQXR0cnMgPSBub2RlLmF0dHJpYnV0ZXMsXG4gICAgICAgICAgICBfdGhpcyA9IHRoaXNcblxuICAgICAgICAvLyDlpITnkIbmjIfku6RcbiAgICAgICAgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwobm9kZUF0dHJzKS5mb3JFYWNoKGZ1bmN0aW9uIChhdHRyKSB7XG4gICAgICAgICAgICB2YXIgYXR0ck5hbWUgPSBhdHRyLm5hbWVcbiAgICAgICAgICAgIGlmIChpc0RpcmVjdGl2ZShhdHRyTmFtZSkpIHtcbiAgICAgICAgICAgICAgICAvLyDmjIfku6TlgLxcbiAgICAgICAgICAgICAgICB2YXIgZXhwcmVzc2lvbiA9IGF0dHIudmFsdWVcbiAgICAgICAgICAgICAgICAvLyDmjIfku6TnsbvlnotcbiAgICAgICAgICAgICAgICB2YXIgZGlyZWN0aXZlID0gYXR0ck5hbWUuc3Vic3RyaW5nKDIpO1xuICAgICAgICAgICAgICAgIC8vIOaYr+S6i+S7tuaMh+S7pFxuICAgICAgICAgICAgICAgIGlmIChpc0V2ZW50RGlyZWN0aXZlKGRpcmVjdGl2ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgUGFyc2Vycy5fZXZlbnRIYW5kbGVyKG5vZGUsIF90aGlzLiR2bSwgZXhwcmVzc2lvbiwgZGlyZWN0aXZlKVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIOWFtuS7luaMh+S7pFxuICAgICAgICAgICAgICAgICAgICBpZiAoUGFyc2Vyc1tkaXJlY3RpdmVdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBQYXJzZXJzW2RpcmVjdGl2ZV0obm9kZSwgX3RoaXMuJHZtLCBleHByZXNzaW9uKVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignW0JpbmRpbmcgZXJyb3JdIHYtJyArIGRpcmVjdGl2ZSArICcgaXMgbm90IHN1cHBvcnRlZCcpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfSxcbiAgICBwYXJzZVRleHQ6IGZ1bmN0aW9uIChub2RlLCBleHApIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1tDb21waWxlci5wcm90b3R5cGVdIOino+aekOWFg+e0oOiKgueCuShwYXJzZVRleHQpJylcbiAgICAgICAgUGFyc2Vycy50ZXh0KG5vZGUsIHRoaXMuJHZtLCBleHApXG4gICAgfVxufVxuXG5cbi8qKlxuICogZWxlbWVudCDnmoTlrZDoioLngrnovazmjaLmiJDmlofmoaPniYfmrrVcbiAqXG4gKiBEb2N1bWVudEZyYWdtZW50cyDmmK/kuIDkuptET03oioLngrnjgILlroPku6zkuI3mmK9ET03moJHnmoTkuIDpg6jliIbjgIJcbiAqIOWcqERPTeagkeS4re+8jOaWh+aho+eJh+auteS8muiiq+abv+aNouS4uuWug+aJgOacieeahOWtkOWFg+e0oOOAglxuICog5Zug5Li65paH5qGj54mH5q615a2Y5Zyo5LiO5YaF5a2Y5Lit77yM5bm25LiN5ZyoRE9N5qCR5Lit77yMXG4gKiDmiYDku6XlsIblrZDlhYPntKDmj5LlhaXliLDmlofmoaPniYfmrrXml7bkuI3kvJrlvJXotbfpobXpnaLlm57mtYEocmVmbG93KSjlr7nlhYPntKDkvY3nva7lkozlh6DkvZXkuIrnmoTorqHnrpcp77yM5Y+v5Lul5LyY5YyW5oCn6IO944CCXG4gKlxuICogQHBhcmFtIGVsXG4gKiBAcmV0dXJucyB7RG9jdW1lbnRGcmFnbWVudH1cbiAqL1xuZnVuY3Rpb24gbm9kZTJGcmFnbWVudChlbCkge1xuICAgIHZhciBmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKVxuICAgIHZhciBjaGlsZFxuICAgIHdoaWxlIChjaGlsZCA9IGVsLmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQoY2hpbGQpO1xuICAgIH1cbiAgICByZXR1cm4gZnJhZ21lbnRcbn1cblxuLyoqXG4gKiDmmK/lkKbmmK/mjIfku6RcbiAqXG4gKiBAcGFyYW0gYXR0ck5hbWVcbiAqIEByZXR1cm5zIHtib29sZWFufVxuICovXG5mdW5jdGlvbiBpc0RpcmVjdGl2ZShhdHRyTmFtZSkge1xuICAgIHJldHVybiBhdHRyTmFtZS5pbmRleE9mKCd2LScpID09PSAwXG59XG4vKipcbiAqIOaYr+WQpuaYr+S6i+S7tuaMh+S7pFxuICpcbiAqIEBwYXJhbSBhdHRyTmFtZVxuICogQHJldHVybnMge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGlzRXZlbnREaXJlY3RpdmUoYXR0ck5hbWUpIHtcbiAgICByZXR1cm4gYXR0ck5hbWUuaW5kZXhPZignb24nKSA9PT0gMFxufVxuLyoqXG4gKiDmmK/lkKbmmK/lhYPntKDoioLngrlcbiAqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL3poLUNOL2RvY3MvV2ViL0FQSS9Ob2RlL25vZGVUeXBlXG4gKlxuICogQHBhcmFtIG5vZGVcbiAqIEByZXR1cm5zIHtib29sZWFufVxuICovXG5mdW5jdGlvbiBpc0VsZW1lbnROb2RlKG5vZGUpIHtcbiAgICByZXR1cm4gbm9kZSAmJiBub2RlLm5vZGVUeXBlID09PSAxXG59XG4vKipcbiAqIOaYr+WQpuaYr+aWh+acrOiKgueCuVxuICpcbiAqIEBwYXJhbSBub2RlXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gaXNUZXh0Tm9kZShub2RlKSB7XG4gICAgcmV0dXJuIG5vZGUgJiYgbm9kZS5ub2RlVHlwZSA9PT0gM1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjcmVhdGVDb21waWxlcihvcHRpb25zLCB2bSkge1xuICAgIG5ldyBDb21waWxlcihvcHRpb25zLCB2bSlcbn1cbiIsIi8qKlxuICogRGVwZW5kLmpzXG4gKlxuICog5L6d6LWW5pS26ZuG5qih5Z2XLCDorqLpmIXogIXnrqHnkIblmahcbiAqXG4gKiDmr4/kuKrmlbDmja7mi6XmnInkuIDkuKogRGVwZW5kIOS+nei1luaUtumbhuWZqO+8jFxuICog55So5LqO57u05oqkIHdhdGNoZXJzICjorqLpmIXogIUp5pWw57uE77yM5pWw5o2u5Y+Y5Yqo6Kem5Y+RIG5vdGlmeSDmlrnms5XvvIxcbiAqIOWGjeiwg+eUqCB3YXRjaGVycyDnmoQgdXBkYXRlIOaWueazlVxuICpcbiAqIENyZWF0ZWQgYnkgeGllcGFuIG9uIDIwMTcvMS85IOS4i+WNiDM6NTIuXG4gKi9cblxudmFyIGlkID0gMDtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gRGVwZW5kKGtleSkge1xuICAgIGNvbnNvbGUubG9nKCfmraPlnKjliJvlu7pb5L6d6LWW5pS26ZuG5ZmoXS4uLicsICdrZXknLCBrZXkpXG4gICAgdGhpcy5pZCA9IGlkKytcbiAgICAvLyDorqLpmIXogIXmlbDnu4RcbiAgICB0aGlzLndhdGNoZXJzID0gW11cbiAgICB0aGlzLmtleSA9IGtleVxufVxuXG5EZXBlbmQucHJvdG90eXBlID0ge1xuICAgIC8qKlxuICAgICAqIOa3u+WKoOiuoumYheiAhVxuICAgICAqXG4gICAgICogQHBhcmFtIHdhdGNoZXJcbiAgICAgKi9cbiAgICBhZGRXYXRjaGVyOiBmdW5jdGlvbiAod2F0Y2hlcikge1xuICAgICAgICBjb25zb2xlLmxvZygnW0RlcGVuZC5wcm90b3R5cGVdIGFkZFdhdGNoZXInKVxuICAgICAgICBjb25zb2xlLmxvZyh0aGlzLndhdGNoZXJzKVxuICAgICAgICB0aGlzLndhdGNoZXJzLnB1c2god2F0Y2hlcilcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIOmAmuefpeaJgOaciSBXYXRjaGVyIOW5tuinpuWPkeWbnuiwg+WHveaVsFxuICAgICAqL1xuICAgIG5vdGlmeTogZnVuY3Rpb24gKCkge1xuICAgICAgICBjb25zb2xlLmxvZygnW0RlcGVuZC5wcm90b3R5cGVdIG5vdGlmeScpXG4gICAgICAgIGNvbnNvbGUubG9nKCd3YXRjaGVycycsIHRoaXMud2F0Y2hlcnMpXG4gICAgICAgIHRoaXMud2F0Y2hlcnMuZm9yRWFjaChmdW5jdGlvbiAod2F0Y2hlcikge1xuICAgICAgICAgICAgd2F0Y2hlci51cGRhdGUoKVxuICAgICAgICB9KVxuICAgIH1cbn0iLCIvKipcbiAqIG9ic2VydmVyLmpzXG4gKlxuICog5pWw5o2u55uR5ZCs5qih5Z2XKOinguWvn+iAhSlcbiAqXG4gKiBDcmVhdGVkIGJ5IHhpZXBhbiBvbiAyMDE3LzEvNiDkuIvljYg0OjA0LlxuICovXG5pbXBvcnQgRGVwZW5kIGZyb20gXCIuL0RlcGVuZFwiO1xuXG4vKipcbiAqIOWIm+W7uuaVsOaNruebkeWQrOWZqFxuICpcbiAqIEBwYXJhbSB2YWx1ZVxuICogQHJldHVybnMge09ic2VydmVyfVxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjcmVhdGVPYnNlcnZlcihkYXRhKSB7XG4gICAgaWYgKGRhdGEpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBPYnNlcnZlcihkYXRhKVxuICAgIH1cbn1cblxuZnVuY3Rpb24gT2JzZXJ2ZXIoZGF0YSkge1xuICAgIC8vIOebkeWQrOWvueixoeeahOWPmOWMllxuICAgIGlmICh0eXBlb2YgZGF0YSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ+ato+WcqOWIm+W7ulvkuovku7bnm5HlkKzlmahdLi4uJylcbiAgICAgICAgY29uc29sZS5sb2coJ+iiq+ebkeWQrOaVsOaNru+8micsIGRhdGEpXG4gICAgICAgIHRoaXMub2JzZXJ2ZU9iaihkYXRhKVxuICAgIH1cbn1cblxuT2JzZXJ2ZXIucHJvdG90eXBlID0ge1xuICAgIC8qKlxuICAgICAqIOebkeWQrOWvueixoeeahOWPmOWMllxuICAgICAqXG4gICAgICogQHBhcmFtIGRhdGFcbiAgICAgKi9cbiAgICBvYnNlcnZlT2JqOiBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICBjb25zb2xlLmxvZygnW09ic2VydmVyLnByb3RvdHlwZV0gb2JzZXJ2ZU9iaicpXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXNcbiAgICAgICAgLy8g5Y+W5Ye6ZGF0YeS4reeahOaJgOacieWxnuaAp1xuICAgICAgICBPYmplY3Qua2V5cyhkYXRhKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgIF90aGlzLm9ic2VydmUoZGF0YSwga2V5LCBkYXRhW2tleV0pXG4gICAgICAgIH0pXG4gICAgfSxcbiAgICAvKipcbiAgICAgKiDmo4DmtYvlr7nosaHnmoTlj5jljJYgJiDkvp3otZbmlLbpm4ZcbiAgICAgKlxuICAgICAqIEBwYXJhbSBkYXRhXG4gICAgICogQHBhcmFtIGtleVxuICAgICAqIEBwYXJhbSB2YWxcbiAgICAgKi9cbiAgICBvYnNlcnZlOiBmdW5jdGlvbiAoZGF0YSwga2V5LCB2YWwpIHtcbiAgICAgICAgdmFyIGRlcCA9IG5ldyBEZXBlbmQoa2V5KVxuICAgICAgICAvLyDltYzlpZflr7nosaFcbiAgICAgICAgdmFyIGNoaWxkT2JqID0gY3JlYXRlT2JzZXJ2ZXIodmFsKVxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZGF0YSwga2V5LCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIC8vIOWmguaenOW9k+WJjeaciSBXYXRjaGVyIOWwseWwhuivpSBXYXRjaGVyIOe7keWumuWIsOW9k+WJjeeahOaVsOaNruS4ilxuICAgICAgICAgICAgICAgIGlmIChEZXBlbmQud2F0Y2hlcikge1xuICAgICAgICAgICAgICAgICAgICBEZXBlbmQud2F0Y2hlci5hZGREZXBlbmQoZGVwKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAobmV3VmFsKSB7XG4gICAgICAgICAgICAgICAgaWYgKG5ld1ZhbCA9PT0gdmFsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YWwgPSBuZXdWYWxcbiAgICAgICAgICAgICAgICBjaGlsZE9iaiA9IGNyZWF0ZU9ic2VydmVyKG5ld1ZhbClcbiAgICAgICAgICAgICAgICAvLyDpgJrnn6XmiYDmnInorqLpmIXogIVcbiAgICAgICAgICAgICAgICBkZXAubm90aWZ5KClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9XG59XG5cbiIsIi8qKlxuICogUGFyc2VyLmpzXG4gKlxuICog5oyH5Luk6Kej5p6Q5qih5Z2XKHYtdGV4dCx2LWh0bWwsdi1tb2RlbCx2LWNsYXNzLHYtb24pXG4gKlxuICogQ3JlYXRlZCBieSB4aWVwYW4gb24gMjAxNy8xLzEwIOS4i+WNiDE6MjUuXG4gKi9cbmltcG9ydCBVcGRhdGVyIGZyb20gXCIuL1VwZGF0ZXJcIjtcbmltcG9ydCBXYXRjaGVyIGZyb20gXCIuL1dhdGNoZXJcIjtcblxuXG52YXIgUGFyc2VycyA9IHtcbiAgICB0ZXh0OiBmdW5jdGlvbiAobm9kZSwgdm0sIGV4cCkge1xuICAgICAgICAvLyBjb25zb2xlLmxvZygnW0NvbXBpbGVyIERpcmVjdGl2ZVBhcnNlcnNdIHRleHQnKVxuICAgICAgICB0aGlzLl9iaW5kKG5vZGUsIHZtLCBleHAsICd0ZXh0JylcbiAgICB9LFxuICAgIGh0bWw6IGZ1bmN0aW9uIChub2RlLCB2bSwgZXhwKSB7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdbQ29tcGlsZXIgRGlyZWN0aXZlUGFyc2Vyc10gaHRtbCcpXG4gICAgICAgIHRoaXMuX2JpbmQobm9kZSwgdm0sIGV4cCwgJ2h0bWwnKVxuICAgIH0sXG4gICAgbW9kZWw6IGZ1bmN0aW9uIChub2RlLCB2bSwgZXhwKSB7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdbQ29tcGlsZXIgRGlyZWN0aXZlUGFyc2Vyc10gbW9kZWwnKVxuICAgICAgICB0aGlzLl9iaW5kKG5vZGUsIHZtLCBleHAsICdtb2RlbCcpXG5cbiAgICAgICAgdmFyIF90aGlzID0gdGhpcyxcbiAgICAgICAgICAgIHZhbCA9IHRoaXMuX2dldFZhbHVlKHZtLCBleHApXG4gICAgICAgIG5vZGUuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIG5ld1ZhbCA9IGUudGFyZ2V0LnZhbHVlXG4gICAgICAgICAgICBpZiAodmFsID09PSBuZXdWYWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF90aGlzLl9zZXRWYWx1ZSh2bSwgZXhwLCBuZXdWYWwpXG4gICAgICAgICAgICB2YWwgPSBuZXdWYWxcbiAgICAgICAgfSlcbiAgICB9LFxuICAgIGNsYXNzOiBmdW5jdGlvbiAobm9kZSwgdm0sIGV4cCkge1xuICAgICAgICB0aGlzLl9iaW5kKG5vZGUsIHZtLCBleHAsICdjbGFzcycpXG4gICAgfSxcbiAgICAvKipcbiAgICAgKiDosIPnlKggVXBkYXRlciDop4blm77liLfmlrDmqKHlnZflubbkuLrlhbbliJvlu7rmlbDmja7orqLpmIXmqKHlnZdcbiAgICAgKiBAcGFyYW0gbm9kZVxuICAgICAqIEBwYXJhbSB2bVxuICAgICAqIEBwYXJhbSBleHBcbiAgICAgKiBAcGFyYW0gZGlyXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfYmluZDogZnVuY3Rpb24gKG5vZGUsIHZtLCBleHAsIGRpcikge1xuICAgICAgICAvLyDmlbDmja7mm7TmlrDlh73mlbBcbiAgICAgICAgdmFyIHVwZGF0ZXJGbiA9IFVwZGF0ZXJbZGlyXVxuXG4gICAgICAgIGlmICh1cGRhdGVyRm4pIHtcbiAgICAgICAgICAgIC8ve25vZGUsdmFsdWV9XG4gICAgICAgICAgICAvLyDliJ3lp4vljJbop4blm75cbiAgICAgICAgICAgIHVwZGF0ZXJGbihub2RlLCB0aGlzLl9nZXRWYWx1ZSh2bSwgZXhwKSlcbiAgICAgICAgICAgIC8vIOWIm+W7uuaVsOaNruiuoumYheWZqOiuoumYheaVsOaNruWPmOWMlu+8jOabtOaWsOinhuWbvlxuICAgICAgICAgICAgbmV3IFdhdGNoZXIodm0sIGV4cCwgZnVuY3Rpb24gKHZhbCwgb2xkVmFsKSB7XG4gICAgICAgICAgICAgICAgdXBkYXRlckZuKG5vZGUsIHZhbCwgb2xkVmFsKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgIH0sXG4gICAgLyoqXG4gICAgICog5LqL5Lu25aSE55CGXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbm9kZSDoioLngrlcbiAgICAgKiBAcGFyYW0gdm0gQmluZGluZ+WunuS+i1xuICAgICAqIEBwYXJhbSBleHAg5pa55rOV5ZCNXG4gICAgICogQHBhcmFtIGRpciDmjIfku6TlkI3np7Ao5aaC77yab246Y2xpY2spXG4gICAgICovXG4gICAgX2V2ZW50SGFuZGxlcjogZnVuY3Rpb24gKG5vZGUsIHZtLCBleHAsIGRpcikge1xuICAgICAgICBjb25zb2xlLmxvZygnW0NvbXBpbGVyIERpcmVjdGl2ZVBhcnNlcnNdIGV2ZW50SGFuZGxlcicpXG4gICAgICAgIC8vIOS6i+S7tuexu+Wei++8jOWmgiBjbGljayDkuovku7ZcbiAgICAgICAgdmFyIGV2ZW50VHlwZSA9IGRpci5zcGxpdCgnOicpWzFdXG4gICAgICAgIC8vIOe7keWumueahOaWueazlVxuICAgICAgICB2YXIgZm4gPSB2bS4kb3B0aW9ucy5tZXRob2RzICYmIHZtLiRvcHRpb25zLm1ldGhvZHNbZXhwXVxuXG4gICAgICAgIC8vIOa3u+WKoOS6i+S7tuebkeWQrOWZqFxuICAgICAgICBpZiAoZXZlbnRUeXBlICYmIGZuKSB7XG4gICAgICAgICAgICBub2RlLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLCBmbi5iaW5kKHZtKSwgZmFsc2UpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoIWV2ZW50VHlwZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tCaW5kaW5nIGVycm9yXSBldmVudFR5cGUgYWZ0ZXIgOiBpcyBub3QgZGVmaW5lZCcpXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tCaW5kaW5nIGVycm9yXSBldmVudFxcJ3MgZnVuY3Rpb24gb3IgZnVuY3Rpb24gbmFtZSBpcyBub3QgZGVmaW5lZCcpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuICAgIF9nZXRWYWx1ZTogZnVuY3Rpb24gKHZtLCBleHApIHtcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ1tDb21waWxlciBEaXJlY3RpdmVQYXJzZXJzXSBfZ2V0Vk1WYWwnKVxuICAgICAgICB2YXIgdmFsID0gdm0uJGRhdGFcbiAgICAgICAgZXhwID0gZXhwLnNwbGl0KCcuJylcbiAgICAgICAgZXhwLmZvckVhY2goZnVuY3Rpb24gKGspIHtcbiAgICAgICAgICAgIHZhbCA9IHZhbFtrXVxuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gdmFsXG4gICAgfSxcblxuICAgIF9zZXRWYWx1ZTogZnVuY3Rpb24gKHZtLCBleHAsIHZhbHVlKSB7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdbQ29tcGlsZXIgRGlyZWN0aXZlUGFyc2Vyc10gX3NldFZNVmFsJylcbiAgICAgICAgdmFyIHZhbCA9IHZtLiRkYXRhXG4gICAgICAgIGV4cCA9IGV4cC5zcGxpdCgnLicpXG4gICAgICAgIGV4cC5mb3JFYWNoKGZ1bmN0aW9uIChrLCBpKSB7XG4gICAgICAgICAgICBpZiAoaSA8IGV4cC5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgICAgdmFsID0gdmFsW2tdXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhbFtrXSA9IHZhbHVlXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQYXJzZXJzIiwiLyoqXG4gKiBVcGRhdGVyLmpzXG4gKlxuICog6KeG5Zu+5Yi35paw5qih5Z2XXG4gKlxuICogQ3JlYXRlZCBieSB4aWVwYW4gb24gMjAxNy8xLzkg5LiL5Y2INDo1OS5cbiAqL1xuXG52YXIgVXBkYXRlciA9IHtcbiAgICB0ZXh0OiBmdW5jdGlvbiAobm9kZSwgdmFsdWUpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1tVcGRhdGVyXSB2LXRleHQnLCB2YWx1ZSlcbiAgICAgICAgbm9kZS50ZXh0Q29udGVudCA9IHR5cGVvZiB2YWx1ZSA9PSAndW5kZWZpbmVkJyA/ICcnIDogdmFsdWVcbiAgICB9LFxuICAgIGh0bWw6IGZ1bmN0aW9uIChub2RlLCB2YWx1ZSkge1xuICAgICAgICBjb25zb2xlLmxvZygnW1VwZGF0ZXJdIHYtaHRtbCcsIG5vZGUsIHZhbHVlKVxuICAgICAgICBub2RlLmlubmVySFRNTCA9IHR5cGVvZiB2YWx1ZSA9PSAndW5kZWZpbmVkJyA/ICcnIDogdmFsdWVcbiAgICB9LFxuICAgIGNsYXNzOiBmdW5jdGlvbiAobm9kZSwgdmFsdWUsIG9sZFZhbHVlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbVXBkYXRlcl0gdi1jbGFzcycsIG5vZGUsIG9sZFZhbHVlLCAnLT4nLCB2YWx1ZSlcbiAgICAgICAgdmFyIGNsYXNzTmFtZSA9IG5vZGUuY2xhc3NOYW1lXG4gICAgICAgIGNsYXNzTmFtZSA9IGNsYXNzTmFtZS5yZXBsYWNlKG9sZFZhbHVlLCAnJykucmVwbGFjZSgvXFxzJC8sICcnKVxuXG4gICAgICAgIHZhciBzcGFjZSA9IGNsYXNzTmFtZSAmJiBTdHJpbmcodmFsdWUpID8gJyAnIDogJydcbiAgICAgICAgbm9kZS5jbGFzc05hbWUgPSBjbGFzc05hbWUgKyBzcGFjZSArIHZhbHVlXG4gICAgfSxcbiAgICBtb2RlbDogZnVuY3Rpb24gKG5vZGUsIHZhbHVlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbVXBkYXRlcl0gdi1tb2RlbCcsIG5vZGUsIHZhbHVlKVxuICAgICAgICBub2RlLnZhbHVlID0gdHlwZW9mIHZhbHVlID09ICd1bmRlZmluZWQnID8gJycgOiB2YWx1ZVxuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgVXBkYXRlclxuIiwiLyoqXG4gKiBXYXRjaGVyLmpzIChzdWJzY3JpYmVyKVxuICpcbiAqIOaVsOaNruiuoumYheaooeWdl++8iOiuoumYheiAhe+8iVxuICpcbiAqIENyZWF0ZWQgYnkgeGllcGFuIG9uIDIwMTcvMS85IOS4i+WNiDE6MzkuXG4gKi9cbmltcG9ydCBEZXBlbmQgZnJvbSBcIi4vRGVwZW5kXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFdhdGNoZXIodm0sIGV4cCwgY2FsbGJhY2spIHtcbiAgICBjb25zb2xlLmxvZygn5q2j5Zyo5Yib5bu6W+aVsOaNruiuoumYheWZqF0uLi4nLCAndm06Jywgdm0sICcgZXhwcmVzc2lvbjonLCBleHAsICcgY2FsbGJhY2s6JywgY2FsbGJhY2spXG5cbiAgICB0aGlzLnZtID0gdm1cbiAgICAvLyDmlbDmja7mm7TmlrDlm57osIPlh73mlbBcbiAgICB0aGlzLmNhbGxiYWNrID0gY2FsbGJhY2tcbiAgICAvLyDooajovr7lvI9cbiAgICB0aGlzLmV4cHJlc3Npb24gPSBleHBcbiAgICAvLyDkvp3otZYgaWRcbiAgICB0aGlzLmRlcElkcyA9IHt9XG4gICAgdGhpcy52YWx1ZSA9IHRoaXMuX2dldFZhbHVlKClcbn1cbi8vIDEuIOavj+asoeiwg+eUqHVwZGF0ZSgp55qE5pe25YCZ5Lya6Kem5Y+R55u45bqU5bGe5oCn55qEZ2V0dGVyXG4vLyBnZXR0ZXLph4zpnaLkvJrop6blj5FkZXAuZGVwZW5kKCnvvIznu6fogIzop6blj5Hov5nph4znmoRhZGREZXBlbmRcblxuLy8gMi4g5YGH5aaC55u45bqU5bGe5oCn55qEZGVwLmlk5bey57uP5Zyo5b2T5YmNd2F0Y2hlcueahGRlcElkc+mHjO+8jOivtOaYjuS4jeaYr+S4gOS4quaWsOeahOWxnuaAp++8jOS7heS7heaYr+aUueWPmOS6huWFtuWAvOiAjOW3slxuLy8g5YiZ5LiN6ZyA6KaB5bCG5b2T5YmNd2F0Y2hlcua3u+WKoOWIsOivpeWxnuaAp+eahGRlcOmHjFxuXG4vLyAzLiDlgYflpoLnm7jlupTlsZ7mgKfmmK/mlrDnmoTlsZ7mgKfvvIzliJnlsIblvZPliY13YXRjaGVy5re75Yqg5Yiw5paw5bGe5oCn55qEZGVw6YeMXG4vLyDlpoLpgJrov4cgdm0uY2hpbGQgPSB7bmFtZTogJ2EnfSDmlLnlj5jkuoYgY2hpbGQubmFtZSDnmoTlgLzvvIxjaGlsZC5uYW1lIOWwseaYr+S4quaWsOWxnuaAp1xuLy8g5YiZ6ZyA6KaB5bCG5b2T5YmNd2F0Y2hlcihjaGlsZC5uYW1lKeWKoOWFpeWIsOaWsOeahCBjaGlsZC5uYW1lIOeahGRlcOmHjFxuLy8g5Zug5Li65q2k5pe2IGNoaWxkLm5hbWUg5piv5Liq5paw5YC877yM5LmL5YmN55qEIHNldHRlcuOAgWRlcCDpg73lt7Lnu4/lpLHmlYjvvIzlpoLmnpzkuI3mioogd2F0Y2hlciDliqDlhaXliLDmlrDnmoQgY2hpbGQubmFtZSDnmoRkZXDkuK1cbi8vIOmAmui/hyBjaGlsZC5uYW1lID0geHh4IOi1i+WAvOeahOaXtuWAme+8jOWvueW6lOeahCB3YXRjaGVyIOWwseaUtuS4jeWIsOmAmuefpe+8jOetieS6juWkseaViOS6hlxuXG4vLyA0LiDmr4/kuKrlrZDlsZ7mgKfnmoR3YXRjaGVy5Zyo5re75Yqg5Yiw5a2Q5bGe5oCn55qEZGVw55qE5ZCM5pe277yM5Lmf5Lya5re75Yqg5Yiw54i25bGe5oCn55qEZGVwXG4vLyDnm5HlkKzlrZDlsZ7mgKfnmoTlkIzml7bnm5HlkKzniLblsZ7mgKfnmoTlj5jmm7TvvIzov5nmoLfvvIzniLblsZ7mgKfmlLnlj5jml7bvvIzlrZDlsZ7mgKfnmoR3YXRjaGVy5Lmf6IO95pS25Yiw6YCa55+l6L+b6KGMdXBkYXRlXG4vLyDov5nkuIDmraXmmK/lnKggX2dldFZhbHVlIOmHjOmdouWujOaIkO+8jGZvckVhY2jml7bkvJrku47niLbnuqflvIDlp4vlj5blgLzvvIzpl7TmjqXosIPnlKjkuoblroPnmoRnZXR0ZXJcbi8vIOinpuWPkeS6hmFkZERlcGVuZCgpLCDlnKjmlbTkuKpmb3JFYWNo6L+H56iL77yM5b2T5YmNd2F0Y2hlcumDveS8muWKoOWFpeWIsOavj+S4queItue6p+i/h+eoi+WxnuaAp+eahGRlcFxuLy8g5L6L5aaC77ya5b2T5YmNd2F0Y2hlcueahOaYrydjaGlsZC5jaGlsZC5uYW1lJywg6YKj5LmIY2hpbGQsIGNoaWxkLmNoaWxkLCBjaGlsZC5jaGlsZC5uYW1l6L+Z5LiJ5Liq5bGe5oCn55qEZGVw6YO95Lya5Yqg5YWl5b2T5YmNd2F0Y2hlclxuV2F0Y2hlci5wcm90b3R5cGUgPSB7XG4gICAgdXBkYXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbV2F0Y2hlci5wcm90b3R5cGVdIHVwZGF0ZScpXG4gICAgICAgIHZhciB2YWx1ZSA9IHRoaXMuX2dldFZhbHVlKClcbiAgICAgICAgdmFyIG9sZFZhbHVlID0gdGhpcy52YWx1ZVxuICAgICAgICBpZiAodmFsdWUgIT09IG9sZFZhbHVlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnW1dhdGNoZXIucHJvdG90eXBlXSB2YWx1ZTonLCBvbGRWYWx1ZSwgJy0+JywgdmFsdWUpXG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWVcbiAgICAgICAgICAgIHRoaXMuY2FsbGJhY2suY2FsbCh0aGlzLnZtLCB2YWx1ZSwgb2xkVmFsdWUpXG4gICAgICAgIH1cbiAgICB9LFxuICAgIGFkZERlcGVuZDogZnVuY3Rpb24gKGRlcCkge1xuICAgICAgICBjb25zb2xlLmxvZygnW1dhdGNoZXIucHJvdG90eXBlXSBhZGREZXBlbmQnKVxuICAgICAgICBpZiAoIXRoaXMuZGVwSWRzLmhhc093blByb3BlcnR5KGRlcC5pZCkpIHtcbiAgICAgICAgICAgIGRlcC5hZGRXYXRjaGVyKHRoaXMpXG4gICAgICAgICAgICB0aGlzLmRlcElkc1tkZXAuaWRdID0gZGVwXG4gICAgICAgIH1cbiAgICAgICAgY29uc29sZS5sb2coJ1tXYXRjaGVyLnByb3RvdHlwZV0gYWRkRGVwZW5kJywgdGhpcylcbiAgICB9LFxuICAgIF9nZXRWYWx1ZTogZnVuY3Rpb24gKCkge1xuXG4gICAgICAgIERlcGVuZC53YXRjaGVyID0gdGhpc1xuXG4gICAgICAgIHZhciBleHAgPSB0aGlzLmV4cHJlc3Npb24uc3BsaXQoJy4nKVxuICAgICAgICB2YXIgdmFsID0gdGhpcy52bS4kZGF0YVxuICAgICAgICBleHAuZm9yRWFjaChmdW5jdGlvbiAoaykge1xuICAgICAgICAgICAgdmFsID0gdmFsW2tdXG4gICAgICAgIH0pXG5cbiAgICAgICAgRGVwZW5kLndhdGNoZXIgPSBudWxsXG5cbiAgICAgICAgcmV0dXJuIHZhbFxuICAgIH1cbn0iXX0="}