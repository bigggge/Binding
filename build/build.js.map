{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/Binding.js","src/Compiler.js","src/Depend.js","src/Observer.js","src/Parser.js","src/Updater.js","src/Watcher.js"],"names":[],"mappings":"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","file":"build.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","/**\n * Bind.js\n *\n * Created by xiepan on 2017/1/9 上午11:50.\n */\nimport createCompiler from \"./Compiler\";\nimport createObserver from \"./Observer\";\nimport Watcher from \"./Watcher\";\n\nwindow.Binding = Binding\n\n/**\n * 构造函数入口\n *\n * @param options [数据参数对象]\n * @constructor\n */\nfunction Binding(options) {\n    console.log('Binding 正在启动...')\n    console.log('数据参数对象:', options)\n    this.$options = options\n    this.$data = options.data\n\n    var el = document.querySelector(this.$options.el)\n\n    if (!el) {\n        console.error('[Binding warn] ' + this.$options.el + ' is not exist')\n        return\n    }\n\n    // 代理\n    this._init(el)\n    // 创建数据监听器(观察者)\n    createObserver(this.$data)\n    // 创建编译模块\n    createCompiler(options, this)\n}\n\nvar proto = Binding.prototype\n\nproto._init = function (el) {\n    var _this = this\n\n    this.$options.el = el\n\n    Object.keys(_this.$data).forEach(function (key) {\n        _this._proxy(key)\n    })\n}\nproto.$watch = function (key, cb) {\n    new Watcher(this, key, cb)\n}\n\nproto._proxy = function (key) {\n    console.log('[Binding.prototype] proxy')\n    var _this = this\n    Object.defineProperty(_this, key,\n        {\n            configurable: false,\n            enumerable: true,\n            get: function () {\n                return _this.$data[key]\n            },\n            set: function (newVal) {\n                _this.$data[key] = newVal\n            }\n        }\n    )\n}\n","/**\n * compile.js\n *\n * 编译模块\n *\n * Created by xiepan on 2017/1/9 上午10:12.\n */\nimport Parsers from \"./Parser\";\n\nfunction Compiler(options, vm) {\n    console.log('正在创建[指令解析器]...')\n    console.log('数据参数对象:', options, 'Binding 实例', vm)\n\n    var el = options.el\n    this.$el = isElementNode(el) ? el : document.querySelector(el)\n    this.$data = options.$data\n    this.$vm = vm\n    this.mount()\n}\n\nCompiler.prototype = {\n    mount: function () {\n        var fragment = node2Fragment(this.$el)\n        this.compile(fragment)\n        this.$el.appendChild(fragment)\n    },\n\n    compile: function (el) {\n        console.log('[Compiler.prototype] 开始解析(compile)', el)\n        // Node.childNodes 返回包含指定节点的子节点的集合\n        // https://developer.mozilla.org/zh-CN/docs/Web/API/Node/childNodes\n        // ParentNode.children 是一个只读属性，返回一个包含当前元素的子元素的集合\n        // https://developer.mozilla.org/zh-CN/docs/Web/API/ParentNode/children\n        var childNodes = el.childNodes,\n            _this = this\n        Array.prototype.slice.call(childNodes).forEach(function (node) {\n            var text = node.textContent\n            var mustacheRe = /\\{\\{(.*)\\}\\}/\n\n            // 元素\n            if (isElementNode(node)) {\n                _this.parse(node)\n                // 文本\n            } else if (isTextNode(node) && mustacheRe.test(text)) {\n                _this.parseText(node, RegExp.$1)\n            }\n            // 子节点\n            if (node.childNodes && node.childNodes.length > 0) {\n                _this.compile(node)\n            }\n        })\n    },\n    /**\n     * 解析元素节点\n     *\n     * @param node\n     */\n    parse: function (node) {\n        console.log('[Compiler.prototype] 解析元素节点(parse)')\n        var nodeAttrs = node.attributes,\n            _this = this\n\n        // 处理指令\n        Array.prototype.slice.call(nodeAttrs).forEach(function (attr) {\n            var attrName = attr.name\n            if (isDirective(attrName)) {\n                // 指令值\n                var expression = attr.value\n                // 指令类型\n                var directive = attrName.substring(2);\n                // 是事件指令\n                if (isEventDirective(directive)) {\n                    Parsers._eventHandler(node, _this.$vm, expression, directive)\n                } else {\n                    // 其他指令\n                    if (Parsers[directive]) {\n                        Parsers[directive](node, _this.$vm, expression)\n                    } else {\n                        console.error('[Binding error] v-' + directive + ' is not supported')\n                    }\n                }\n            }\n        })\n    },\n    parseText: function (node, exp) {\n        console.log('[Compiler.prototype] 解析元素节点(parseText)')\n        Parsers.text(node, this.$vm, exp)\n    }\n}\n\n\n/**\n * element 的子节点转换成文档片段\n *\n * DocumentFragments 是一些DOM节点。它们不是DOM树的一部分。\n * 在DOM树中，文档片段会被替换为它所有的子元素。\n * 因为文档片段存在与内存中，并不在DOM树中，\n * 所以将子元素插入到文档片段时不会引起页面回流(reflow)(对元素位置和几何上的计算)，可以优化性能。\n *\n * @param el\n * @returns {DocumentFragment}\n */\nfunction node2Fragment(el) {\n    var fragment = document.createDocumentFragment()\n    var child\n    while (child = el.firstChild) {\n        fragment.appendChild(child);\n    }\n    return fragment\n}\n\n/**\n * 是否是指令\n *\n * @param attrName\n * @returns {boolean}\n */\nfunction isDirective(attrName) {\n    return attrName.indexOf('v-') === 0\n}\n/**\n * 是否是事件指令\n *\n * @param attrName\n * @returns {boolean}\n */\nfunction isEventDirective(attrName) {\n    return attrName.indexOf('on') === 0\n}\n/**\n * 是否是元素节点\n * https://developer.mozilla.org/zh-CN/docs/Web/API/Node/nodeType\n *\n * @param node\n * @returns {boolean}\n */\nfunction isElementNode(node) {\n    return node && node.nodeType === 1\n}\n/**\n * 是否是文本节点\n *\n * @param node\n * @returns {boolean}\n */\nfunction isTextNode(node) {\n    return node && node.nodeType === 3\n}\n\nexport default function createCompiler(options, vm) {\n    new Compiler(options, vm)\n}\n","/**\n * Depend.js\n *\n * 依赖收集模块\n *\n * 每个数据拥有一个 Depend 依赖收集器，\n * 用于维护 watchers (订阅者)数组，数据变动触发 notify 方法，\n * 再调用 watchers 的 update 方法\n *\n * Created by xiepan on 2017/1/9 下午3:52.\n */\n\nvar id = 0;\n\nexport default function Depend(key) {\n    console.log('正在创建[依赖收集器]...', 'key', key)\n    this.id = id++\n    this.watchers = []\n    this.watcher = null\n}\n\nDepend.prototype = {\n    /**\n     * 添加订阅者\n     *\n     * @param watcher\n     */\n    addWatcher: function (watcher) {\n        console.log('[Observer Depend.prototype] addWatcher')\n        this.watchers.push(watcher)\n    },\n    depend: function () {\n        console.log('[Observer Depend.prototype] depend')\n        Depend.watcher.addDepend(this)\n    },\n    notify: function () {\n        console.log('[Observer Depend.prototype] notify')\n        console.log('watchers', this.watchers)\n        this.watchers.forEach(function (watcher) {\n            watcher.update()\n        })\n    }\n}","/**\n * observer.js\n *\n * 数据监听模块\n *\n * Created by xiepan on 2017/1/6 下午4:04.\n */\n// var $data = {name: 'ggg'}\n// createObserver($data)\n// $data.name = '123'\nimport Depend from \"./Depend\";\n\nfunction Observer(data) {\n    // 监听对象的变化\n    if (typeof data === 'object') {\n        console.log('正在创建[事件监听器]...')\n        console.log('被监听数据：', data)\n        this.$data = data\n        this.observeObj(data)\n    }\n}\n\nObserver.prototype = {\n    /**\n     * 监听对象的变化\n     *\n     * @param data\n     */\n    observeObj: function (data) {\n        console.log('[Observer.prototype] observeObj')\n        var _this = this\n        Object.keys(data).forEach(function (key) {\n            _this.defineProperty(_this.$data, key, data[key])\n        })\n    },\n    /**\n     * 检测对象的变化 & 依赖收集\n     *\n     * @param data\n     * @param key\n     * @param val\n     */\n    defineProperty: function (data, key, val) {\n        var dep = new Depend(key)\n        // 嵌套对象\n        var childObj = createObserver(val)\n        Object.defineProperty(data, key, {\n            enumerable: true,\n            configurable: false,\n            get: function () {\n                console.log('[Observer.prototype] defineProperty:Depend.watcher', Depend.watcher)\n                if (Depend.watcher) {\n                    dep.depend()\n                }\n                return val\n            },\n            set: function (newVal) {\n                if (newVal === val) {\n                    return\n                }\n                val = newVal\n                childObj = createObserver(newVal)\n                dep.notify()\n            }\n        })\n    }\n}\n\n/**\n * 创建数据监听器\n *\n * @param value\n * @returns {Observer}\n */\nexport default function createObserver(data) {\n    if (data) {\n        return new Observer(data)\n    }\n}\n","/**\n * Parser.js\n *\n * 指令解析模块(v-text,v-html,v-model,v-class,v-on)\n *\n * Created by xiepan on 2017/1/10 下午1:25.\n */\nimport Updater from \"./Updater\";\nimport Watcher from \"./Watcher\";\n\n\nvar Parsers = {\n    text: function (node, vm, exp) {\n        // console.log('[Compiler DirectiveParsers] text')\n        this._bind(node, vm, exp, 'text')\n    },\n    html: function (node, vm, exp) {\n        // console.log('[Compiler DirectiveParsers] html')\n        this._bind(node, vm, exp, 'html')\n    },\n    model: function (node, vm, exp) {\n        // console.log('[Compiler DirectiveParsers] model')\n        this._bind(node, vm, exp, 'model')\n\n        var _this = this,\n            val = this._getValue(vm, exp)\n        node.addEventListener('input', function (e) {\n            var newVal = e.target.value\n            if (val === newVal) {\n                return\n            }\n            _this._setValue(vm, exp, newVal)\n            val = newVal\n        })\n    },\n    class: function (node, vm, exp) {\n        this._bind(node, vm, exp, 'class')\n    },\n    /**\n     * 调用 Updater 视图刷新模块并为其创建数据订阅模块\n     * @param node\n     * @param vm\n     * @param exp\n     * @param dir\n     * @private\n     */\n    _bind: function (node, vm, exp, dir) {\n        // 数据更新函数\n        var updaterFn = Updater[dir]\n\n        if (updaterFn) {\n            //{node,value}\n            // 初始化视图\n            updaterFn(node, this._getValue(vm, exp))\n            // 创建数据订阅器订阅数据变化，更新视图\n            new Watcher(vm, exp, function (val, oldVal) {\n                updaterFn(node, val, oldVal)\n            })\n        }\n    },\n    /**\n     * 事件处理\n     *\n     * @param node 节点\n     * @param vm Binding实例\n     * @param exp 方法名\n     * @param dir 指令名称(如：on:click)\n     */\n    _eventHandler: function (node, vm, exp, dir) {\n        console.log('[Compiler DirectiveParsers] eventHandler')\n        // 事件类型，如 click 事件\n        var eventType = dir.split(':')[1]\n        // 绑定的方法\n        var fn = vm.$options.methods && vm.$options.methods[exp]\n\n        // 添加事件监听器\n        if (eventType && fn) {\n            node.addEventListener(eventType, fn.bind(vm), false)\n        } else {\n            if (!eventType) {\n                console.error('[Binding error] eventType after : is not defined')\n            } else {\n                console.error('[Binding error] event\\'s function or function name is not defined')\n            }\n        }\n    },\n    _getValue: function (vm, exp) {\n        // console.log('[Compiler DirectiveParsers] _getVMVal')\n        var val = vm.$data\n        exp = exp.split('.')\n        exp.forEach(function (k) {\n            val = val[k]\n        })\n        return val\n    },\n\n    _setValue: function (vm, exp, value) {\n        // console.log('[Compiler DirectiveParsers] _setVMVal')\n        var val = vm.$data\n        exp = exp.split('.')\n        exp.forEach(function (k, i) {\n            if (i < exp.length - 1) {\n                val = val[k]\n            } else {\n                val[k] = value\n            }\n        })\n    }\n}\n\nexport default Parsers","/**\n * Updater.js\n *\n * 视图刷新模块\n *\n * Created by xiepan on 2017/1/9 下午4:59.\n */\n\nvar Updater = {\n    text: function (node, value) {\n        console.log('[Updater] v-text', value)\n        node.textContent = typeof value == 'undefined' ? '' : value\n    },\n    html: function (node, value) {\n        console.log('[Updater] v-html', node, value)\n        node.innerHTML = typeof value == 'undefined' ? '' : value\n    },\n    class: function (node, value, oldValue) {\n        console.log('[Updater] v-class', node, oldValue, '->', value)\n        var className = node.className\n        className = className.replace(oldValue, '').replace(/\\s$/, '')\n\n        var space = className && String(value) ? ' ' : ''\n        node.className = className + space + value\n    },\n    model: function (node, value) {\n        console.log('[Updater] v-model', node, value)\n        node.value = typeof value == 'undefined' ? '' : value\n    }\n}\n\nexport default Updater\n","/**\n * Watcher.js (subscriber)\n *\n * 数据订阅模块\n *\n * Created by xiepan on 2017/1/9 下午1:39.\n */\nimport Depend from \"./Depend\";\n\nexport default function Watcher(vm, exp, callback) {\n    console.log('正在创建[数据订阅器]...', 'vm:', vm, ' expression:', exp, ' callback:', callback)\n\n    this.vm = vm\n    // 数据更新回调函数\n    this.callback = callback\n    // 表达式\n    this.expression = exp\n    // 依赖 id\n    this.depIds = {}\n    this.value = this._getValue()\n}\n\nWatcher.prototype = {\n    update: function () {\n        console.log('[Watcher.prototype] update')\n        var value = this._getValue()\n        var oldValue = this.value\n        if (value !== oldValue) {\n            console.log('[Watcher.prototype] value:', oldValue, '->', value)\n            this.value = value\n            this.callback.call(this.vm, value, oldValue)\n        }\n    },\n    addDepend: function (dep) {\n        console.log('[Watcher.prototype] addDepend')\n        if (!this.depIds.hasOwnProperty(dep.id)) {\n            dep.addWatcher(this)\n            this.depIds[dep.id] = dep\n        }\n    },\n    _beforeGet: function () {\n        Depend.watcher = this\n        console.log('[Watcher.prototype] _beforeGet watcher', this)\n    },\n    _getValue: function () {\n        this._beforeGet();\n        var exp = this.expression.split('.')\n        var val = this.vm.$data\n        exp.forEach(function (k) {\n            val = val[k]\n        })\n        this._afterGet();\n        return val\n    },\n    _afterGet: function () {\n        Depend.watcher = null\n    }\n\n}"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvQmluZGluZy5qcyIsInNyYy9Db21waWxlci5qcyIsInNyYy9EZXBlbmQuanMiLCJzcmMvT2JzZXJ2ZXIuanMiLCJzcmMvUGFyc2VyLmpzIiwic3JjL1VwZGF0ZXIuanMiLCJzcmMvV2F0Y2hlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7O0FDS0E7Ozs7QUFDQTs7OztBQUNBOzs7Ozs7QUFFQSxPQUFPLE9BQVAsR0FBaUIsT0FBakI7O0FBRUE7Ozs7OztBQVhBOzs7OztBQWlCQSxTQUFTLE9BQVQsQ0FBaUIsT0FBakIsRUFBMEI7QUFDdEIsWUFBUSxHQUFSLENBQVksaUJBQVo7QUFDQSxZQUFRLEdBQVIsQ0FBWSxTQUFaLEVBQXVCLE9BQXZCO0FBQ0EsU0FBSyxRQUFMLEdBQWdCLE9BQWhCO0FBQ0EsU0FBSyxLQUFMLEdBQWEsUUFBUSxJQUFyQjs7QUFFQSxRQUFJLEtBQUssU0FBUyxhQUFULENBQXVCLEtBQUssUUFBTCxDQUFjLEVBQXJDLENBQVQ7O0FBRUEsUUFBSSxDQUFDLEVBQUwsRUFBUztBQUNMLGdCQUFRLEtBQVIsQ0FBYyxvQkFBb0IsS0FBSyxRQUFMLENBQWMsRUFBbEMsR0FBdUMsZUFBckQ7QUFDQTtBQUNIOztBQUVEO0FBQ0EsU0FBSyxLQUFMLENBQVcsRUFBWDtBQUNBO0FBQ0EsNEJBQWUsS0FBSyxLQUFwQjtBQUNBO0FBQ0EsNEJBQWUsT0FBZixFQUF3QixJQUF4QjtBQUNIOztBQUVELElBQUksUUFBUSxRQUFRLFNBQXBCOztBQUVBLE1BQU0sS0FBTixHQUFjLFVBQVUsRUFBVixFQUFjO0FBQ3hCLFFBQUksUUFBUSxJQUFaOztBQUVBLFNBQUssUUFBTCxDQUFjLEVBQWQsR0FBbUIsRUFBbkI7O0FBRUEsV0FBTyxJQUFQLENBQVksTUFBTSxLQUFsQixFQUF5QixPQUF6QixDQUFpQyxVQUFVLEdBQVYsRUFBZTtBQUM1QyxjQUFNLE1BQU4sQ0FB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QUdBLGFBQUssU0FBTDtBQUNBLGVBQU8sR0FBUDtBQUNILEtBL0JlO0FBZ0NoQixlQUFXLHFCQUFZO0FBQ25CLHlCQUFPLE9BQVAsR0FBaUIsSUFBakI7QUFDSDs7QUFsQ2UsQ0FBcEIiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiLyoqXG4gKiBCaW5kLmpzXG4gKlxuICogQ3JlYXRlZCBieSB4aWVwYW4gb24gMjAxNy8xLzkg5LiK5Y2IMTE6NTAuXG4gKi9cbmltcG9ydCBjcmVhdGVDb21waWxlciBmcm9tIFwiLi9Db21waWxlclwiO1xuaW1wb3J0IGNyZWF0ZU9ic2VydmVyIGZyb20gXCIuL09ic2VydmVyXCI7XG5pbXBvcnQgV2F0Y2hlciBmcm9tIFwiLi9XYXRjaGVyXCI7XG5cbndpbmRvdy5CaW5kaW5nID0gQmluZGluZ1xuXG4vKipcbiAqIOaehOmAoOWHveaVsOWFpeWPo1xuICpcbiAqIEBwYXJhbSBvcHRpb25zIFvmlbDmja7lj4LmlbDlr7nosaFdXG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZnVuY3Rpb24gQmluZGluZyhvcHRpb25zKSB7XG4gICAgY29uc29sZS5sb2coJ0JpbmRpbmcg5q2j5Zyo5ZCv5YqoLi4uJylcbiAgICBjb25zb2xlLmxvZygn5pWw5o2u5Y+C5pWw5a+56LGhOicsIG9wdGlvbnMpXG4gICAgdGhpcy4kb3B0aW9ucyA9IG9wdGlvbnNcbiAgICB0aGlzLiRkYXRhID0gb3B0aW9ucy5kYXRhXG5cbiAgICB2YXIgZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuJG9wdGlvbnMuZWwpXG5cbiAgICBpZiAoIWVsKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tCaW5kaW5nIHdhcm5dICcgKyB0aGlzLiRvcHRpb25zLmVsICsgJyBpcyBub3QgZXhpc3QnKVxuICAgICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyDku6PnkIZcbiAgICB0aGlzLl9pbml0KGVsKVxuICAgIC8vIOWIm+W7uuaVsOaNruebkeWQrOWZqCjop4Llr5/ogIUpXG4gICAgY3JlYXRlT2JzZXJ2ZXIodGhpcy4kZGF0YSlcbiAgICAvLyDliJvlu7rnvJbor5HmqKHlnZdcbiAgICBjcmVhdGVDb21waWxlcihvcHRpb25zLCB0aGlzKVxufVxuXG52YXIgcHJvdG8gPSBCaW5kaW5nLnByb3RvdHlwZVxuXG5wcm90by5faW5pdCA9IGZ1bmN0aW9uIChlbCkge1xuICAgIHZhciBfdGhpcyA9IHRoaXNcblxuICAgIHRoaXMuJG9wdGlvbnMuZWwgPSBlbFxuXG4gICAgT2JqZWN0LmtleXMoX3RoaXMuJGRhdGEpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgICBfdGhpcy5fcHJveHkoa2V5KVxuICAgIH0pXG59XG5wcm90by4kd2F0Y2ggPSBmdW5jdGlvbiAoa2V5LCBjYikge1xuICAgIG5ldyBXYXRjaGVyKHRoaXMsIGtleSwgY2IpXG59XG5cbnByb3RvLl9wcm94eSA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICBjb25zb2xlLmxvZygnW0JpbmRpbmcucHJvdG90eXBlXSBwcm94eScpXG4gICAgdmFyIF90aGlzID0gdGhpc1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfdGhpcywga2V5LFxuICAgICAgICB7XG4gICAgICAgICAgICBjb25maWd1cmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy4kZGF0YVtrZXldXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAobmV3VmFsKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuJGRhdGFba2V5XSA9IG5ld1ZhbFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgKVxufVxuIiwiLyoqXG4gKiBjb21waWxlLmpzXG4gKlxuICog57yW6K+R5qih5Z2XXG4gKlxuICogQ3JlYXRlZCBieSB4aWVwYW4gb24gMjAxNy8xLzkg5LiK5Y2IMTA6MTIuXG4gKi9cbmltcG9ydCBQYXJzZXJzIGZyb20gXCIuL1BhcnNlclwiO1xuXG5mdW5jdGlvbiBDb21waWxlcihvcHRpb25zLCB2bSkge1xuICAgIGNvbnNvbGUubG9nKCfmraPlnKjliJvlu7pb5oyH5Luk6Kej5p6Q5ZmoXS4uLicpXG4gICAgY29uc29sZS5sb2coJ+aVsOaNruWPguaVsOWvueixoTonLCBvcHRpb25zLCAnQmluZGluZyDlrp7kvosnLCB2bSlcblxuICAgIHZhciBlbCA9IG9wdGlvbnMuZWxcbiAgICB0aGlzLiRlbCA9IGlzRWxlbWVudE5vZGUoZWwpID8gZWwgOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGVsKVxuICAgIHRoaXMuJGRhdGEgPSBvcHRpb25zLiRkYXRhXG4gICAgdGhpcy4kdm0gPSB2bVxuICAgIHRoaXMubW91bnQoKVxufVxuXG5Db21waWxlci5wcm90b3R5cGUgPSB7XG4gICAgbW91bnQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGZyYWdtZW50ID0gbm9kZTJGcmFnbWVudCh0aGlzLiRlbClcbiAgICAgICAgdGhpcy5jb21waWxlKGZyYWdtZW50KVxuICAgICAgICB0aGlzLiRlbC5hcHBlbmRDaGlsZChmcmFnbWVudClcbiAgICB9LFxuXG4gICAgY29tcGlsZTogZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbQ29tcGlsZXIucHJvdG90eXBlXSDlvIDlp4vop6PmnpAoY29tcGlsZSknLCBlbClcbiAgICAgICAgLy8gTm9kZS5jaGlsZE5vZGVzIOi/lOWbnuWMheWQq+aMh+WumuiKgueCueeahOWtkOiKgueCueeahOmbhuWQiFxuICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy96aC1DTi9kb2NzL1dlYi9BUEkvTm9kZS9jaGlsZE5vZGVzXG4gICAgICAgIC8vIFBhcmVudE5vZGUuY2hpbGRyZW4g5piv5LiA5Liq5Y+q6K+75bGe5oCn77yM6L+U5Zue5LiA5Liq5YyF5ZCr5b2T5YmN5YWD57Sg55qE5a2Q5YWD57Sg55qE6ZuG5ZCIXG4gICAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL3poLUNOL2RvY3MvV2ViL0FQSS9QYXJlbnROb2RlL2NoaWxkcmVuXG4gICAgICAgIHZhciBjaGlsZE5vZGVzID0gZWwuY2hpbGROb2RlcyxcbiAgICAgICAgICAgIF90aGlzID0gdGhpc1xuICAgICAgICBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChjaGlsZE5vZGVzKS5mb3JFYWNoKGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgICAgICB2YXIgdGV4dCA9IG5vZGUudGV4dENvbnRlbnRcbiAgICAgICAgICAgIHZhciBtdXN0YWNoZVJlID0gL1xce1xceyguKilcXH1cXH0vXG5cbiAgICAgICAgICAgIC8vIOWFg+e0oFxuICAgICAgICAgICAgaWYgKGlzRWxlbWVudE5vZGUobm9kZSkpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5wYXJzZShub2RlKVxuICAgICAgICAgICAgICAgIC8vIOaWh+acrFxuICAgICAgICAgICAgfSBlbHNlIGlmIChpc1RleHROb2RlKG5vZGUpICYmIG11c3RhY2hlUmUudGVzdCh0ZXh0KSkge1xuICAgICAgICAgICAgICAgIF90aGlzLnBhcnNlVGV4dChub2RlLCBSZWdFeHAuJDEpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyDlrZDoioLngrlcbiAgICAgICAgICAgIGlmIChub2RlLmNoaWxkTm9kZXMgJiYgbm9kZS5jaGlsZE5vZGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5jb21waWxlKG5vZGUpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfSxcbiAgICAvKipcbiAgICAgKiDop6PmnpDlhYPntKDoioLngrlcbiAgICAgKlxuICAgICAqIEBwYXJhbSBub2RlXG4gICAgICovXG4gICAgcGFyc2U6IGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbQ29tcGlsZXIucHJvdG90eXBlXSDop6PmnpDlhYPntKDoioLngrkocGFyc2UpJylcbiAgICAgICAgdmFyIG5vZGVBdHRycyA9IG5vZGUuYXR0cmlidXRlcyxcbiAgICAgICAgICAgIF90aGlzID0gdGhpc1xuXG4gICAgICAgIC8vIOWkhOeQhuaMh+S7pFxuICAgICAgICBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChub2RlQXR0cnMpLmZvckVhY2goZnVuY3Rpb24gKGF0dHIpIHtcbiAgICAgICAgICAgIHZhciBhdHRyTmFtZSA9IGF0dHIubmFtZVxuICAgICAgICAgICAgaWYgKGlzRGlyZWN0aXZlKGF0dHJOYW1lKSkge1xuICAgICAgICAgICAgICAgIC8vIOaMh+S7pOWAvFxuICAgICAgICAgICAgICAgIHZhciBleHByZXNzaW9uID0gYXR0ci52YWx1ZVxuICAgICAgICAgICAgICAgIC8vIOaMh+S7pOexu+Wei1xuICAgICAgICAgICAgICAgIHZhciBkaXJlY3RpdmUgPSBhdHRyTmFtZS5zdWJzdHJpbmcoMik7XG4gICAgICAgICAgICAgICAgLy8g5piv5LqL5Lu25oyH5LukXG4gICAgICAgICAgICAgICAgaWYgKGlzRXZlbnREaXJlY3RpdmUoZGlyZWN0aXZlKSkge1xuICAgICAgICAgICAgICAgICAgICBQYXJzZXJzLl9ldmVudEhhbmRsZXIobm9kZSwgX3RoaXMuJHZtLCBleHByZXNzaW9uLCBkaXJlY3RpdmUpXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8g5YW25LuW5oyH5LukXG4gICAgICAgICAgICAgICAgICAgIGlmIChQYXJzZXJzW2RpcmVjdGl2ZV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFBhcnNlcnNbZGlyZWN0aXZlXShub2RlLCBfdGhpcy4kdm0sIGV4cHJlc3Npb24pXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdbQmluZGluZyBlcnJvcl0gdi0nICsgZGlyZWN0aXZlICsgJyBpcyBub3Qgc3VwcG9ydGVkJylcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9LFxuICAgIHBhcnNlVGV4dDogZnVuY3Rpb24gKG5vZGUsIGV4cCkge1xuICAgICAgICBjb25zb2xlLmxvZygnW0NvbXBpbGVyLnByb3RvdHlwZV0g6Kej5p6Q5YWD57Sg6IqC54K5KHBhcnNlVGV4dCknKVxuICAgICAgICBQYXJzZXJzLnRleHQobm9kZSwgdGhpcy4kdm0sIGV4cClcbiAgICB9XG59XG5cblxuLyoqXG4gKiBlbGVtZW50IOeahOWtkOiKgueCuei9rOaNouaIkOaWh+aho+eJh+autVxuICpcbiAqIERvY3VtZW50RnJhZ21lbnRzIOaYr+S4gOS6m0RPTeiKgueCueOAguWug+S7rOS4jeaYr0RPTeagkeeahOS4gOmDqOWIhuOAglxuICog5ZyoRE9N5qCR5Lit77yM5paH5qGj54mH5q615Lya6KKr5pu/5o2i5Li65a6D5omA5pyJ55qE5a2Q5YWD57Sg44CCXG4gKiDlm6DkuLrmlofmoaPniYfmrrXlrZjlnKjkuI7lhoXlrZjkuK3vvIzlubbkuI3lnKhET03moJHkuK3vvIxcbiAqIOaJgOS7peWwhuWtkOWFg+e0oOaPkuWFpeWIsOaWh+aho+eJh+auteaXtuS4jeS8muW8lei1t+mhtemdouWbnua1gShyZWZsb3cpKOWvueWFg+e0oOS9jee9ruWSjOWHoOS9leS4iueahOiuoeeulynvvIzlj6/ku6XkvJjljJbmgKfog73jgIJcbiAqXG4gKiBAcGFyYW0gZWxcbiAqIEByZXR1cm5zIHtEb2N1bWVudEZyYWdtZW50fVxuICovXG5mdW5jdGlvbiBub2RlMkZyYWdtZW50KGVsKSB7XG4gICAgdmFyIGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpXG4gICAgdmFyIGNoaWxkXG4gICAgd2hpbGUgKGNoaWxkID0gZWwuZmlyc3RDaGlsZCkge1xuICAgICAgICBmcmFnbWVudC5hcHBlbmRDaGlsZChjaGlsZCk7XG4gICAgfVxuICAgIHJldHVybiBmcmFnbWVudFxufVxuXG4vKipcbiAqIOaYr+WQpuaYr+aMh+S7pFxuICpcbiAqIEBwYXJhbSBhdHRyTmFtZVxuICogQHJldHVybnMge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGlzRGlyZWN0aXZlKGF0dHJOYW1lKSB7XG4gICAgcmV0dXJuIGF0dHJOYW1lLmluZGV4T2YoJ3YtJykgPT09IDBcbn1cbi8qKlxuICog5piv5ZCm5piv5LqL5Lu25oyH5LukXG4gKlxuICogQHBhcmFtIGF0dHJOYW1lXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gaXNFdmVudERpcmVjdGl2ZShhdHRyTmFtZSkge1xuICAgIHJldHVybiBhdHRyTmFtZS5pbmRleE9mKCdvbicpID09PSAwXG59XG4vKipcbiAqIOaYr+WQpuaYr+WFg+e0oOiKgueCuVxuICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvemgtQ04vZG9jcy9XZWIvQVBJL05vZGUvbm9kZVR5cGVcbiAqXG4gKiBAcGFyYW0gbm9kZVxuICogQHJldHVybnMge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGlzRWxlbWVudE5vZGUobm9kZSkge1xuICAgIHJldHVybiBub2RlICYmIG5vZGUubm9kZVR5cGUgPT09IDFcbn1cbi8qKlxuICog5piv5ZCm5piv5paH5pys6IqC54K5XG4gKlxuICogQHBhcmFtIG5vZGVcbiAqIEByZXR1cm5zIHtib29sZWFufVxuICovXG5mdW5jdGlvbiBpc1RleHROb2RlKG5vZGUpIHtcbiAgICByZXR1cm4gbm9kZSAmJiBub2RlLm5vZGVUeXBlID09PSAzXG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGNyZWF0ZUNvbXBpbGVyKG9wdGlvbnMsIHZtKSB7XG4gICAgbmV3IENvbXBpbGVyKG9wdGlvbnMsIHZtKVxufVxuIiwiLyoqXG4gKiBEZXBlbmQuanNcbiAqXG4gKiDkvp3otZbmlLbpm4bmqKHlnZdcbiAqXG4gKiDmr4/kuKrmlbDmja7mi6XmnInkuIDkuKogRGVwZW5kIOS+nei1luaUtumbhuWZqO+8jFxuICog55So5LqO57u05oqkIHdhdGNoZXJzICjorqLpmIXogIUp5pWw57uE77yM5pWw5o2u5Y+Y5Yqo6Kem5Y+RIG5vdGlmeSDmlrnms5XvvIxcbiAqIOWGjeiwg+eUqCB3YXRjaGVycyDnmoQgdXBkYXRlIOaWueazlVxuICpcbiAqIENyZWF0ZWQgYnkgeGllcGFuIG9uIDIwMTcvMS85IOS4i+WNiDM6NTIuXG4gKi9cblxudmFyIGlkID0gMDtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gRGVwZW5kKGtleSkge1xuICAgIGNvbnNvbGUubG9nKCfmraPlnKjliJvlu7pb5L6d6LWW5pS26ZuG5ZmoXS4uLicsICdrZXknLCBrZXkpXG4gICAgdGhpcy5pZCA9IGlkKytcbiAgICB0aGlzLndhdGNoZXJzID0gW11cbiAgICB0aGlzLndhdGNoZXIgPSBudWxsXG59XG5cbkRlcGVuZC5wcm90b3R5cGUgPSB7XG4gICAgLyoqXG4gICAgICog5re75Yqg6K6i6ZiF6ICFXG4gICAgICpcbiAgICAgKiBAcGFyYW0gd2F0Y2hlclxuICAgICAqL1xuICAgIGFkZFdhdGNoZXI6IGZ1bmN0aW9uICh3YXRjaGVyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbT2JzZXJ2ZXIgRGVwZW5kLnByb3RvdHlwZV0gYWRkV2F0Y2hlcicpXG4gICAgICAgIHRoaXMud2F0Y2hlcnMucHVzaCh3YXRjaGVyKVxuICAgIH0sXG4gICAgZGVwZW5kOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbT2JzZXJ2ZXIgRGVwZW5kLnByb3RvdHlwZV0gZGVwZW5kJylcbiAgICAgICAgRGVwZW5kLndhdGNoZXIuYWRkRGVwZW5kKHRoaXMpXG4gICAgfSxcbiAgICBub3RpZnk6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1tPYnNlcnZlciBEZXBlbmQucHJvdG90eXBlXSBub3RpZnknKVxuICAgICAgICBjb25zb2xlLmxvZygnd2F0Y2hlcnMnLCB0aGlzLndhdGNoZXJzKVxuICAgICAgICB0aGlzLndhdGNoZXJzLmZvckVhY2goZnVuY3Rpb24gKHdhdGNoZXIpIHtcbiAgICAgICAgICAgIHdhdGNoZXIudXBkYXRlKClcbiAgICAgICAgfSlcbiAgICB9XG59IiwiLyoqXG4gKiBvYnNlcnZlci5qc1xuICpcbiAqIOaVsOaNruebkeWQrOaooeWdl1xuICpcbiAqIENyZWF0ZWQgYnkgeGllcGFuIG9uIDIwMTcvMS82IOS4i+WNiDQ6MDQuXG4gKi9cbi8vIHZhciAkZGF0YSA9IHtuYW1lOiAnZ2dnJ31cbi8vIGNyZWF0ZU9ic2VydmVyKCRkYXRhKVxuLy8gJGRhdGEubmFtZSA9ICcxMjMnXG5pbXBvcnQgRGVwZW5kIGZyb20gXCIuL0RlcGVuZFwiO1xuXG5mdW5jdGlvbiBPYnNlcnZlcihkYXRhKSB7XG4gICAgLy8g55uR5ZCs5a+56LGh55qE5Y+Y5YyWXG4gICAgaWYgKHR5cGVvZiBkYXRhID09PSAnb2JqZWN0Jykge1xuICAgICAgICBjb25zb2xlLmxvZygn5q2j5Zyo5Yib5bu6W+S6i+S7tuebkeWQrOWZqF0uLi4nKVxuICAgICAgICBjb25zb2xlLmxvZygn6KKr55uR5ZCs5pWw5o2u77yaJywgZGF0YSlcbiAgICAgICAgdGhpcy4kZGF0YSA9IGRhdGFcbiAgICAgICAgdGhpcy5vYnNlcnZlT2JqKGRhdGEpXG4gICAgfVxufVxuXG5PYnNlcnZlci5wcm90b3R5cGUgPSB7XG4gICAgLyoqXG4gICAgICog55uR5ZCs5a+56LGh55qE5Y+Y5YyWXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZGF0YVxuICAgICAqL1xuICAgIG9ic2VydmVPYmo6IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbT2JzZXJ2ZXIucHJvdG90eXBlXSBvYnNlcnZlT2JqJylcbiAgICAgICAgdmFyIF90aGlzID0gdGhpc1xuICAgICAgICBPYmplY3Qua2V5cyhkYXRhKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgIF90aGlzLmRlZmluZVByb3BlcnR5KF90aGlzLiRkYXRhLCBrZXksIGRhdGFba2V5XSlcbiAgICAgICAgfSlcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIOajgOa1i+WvueixoeeahOWPmOWMliAmIOS+nei1luaUtumbhlxuICAgICAqXG4gICAgICogQHBhcmFtIGRhdGFcbiAgICAgKiBAcGFyYW0ga2V5XG4gICAgICogQHBhcmFtIHZhbFxuICAgICAqL1xuICAgIGRlZmluZVByb3BlcnR5OiBmdW5jdGlvbiAoZGF0YSwga2V5LCB2YWwpIHtcbiAgICAgICAgdmFyIGRlcCA9IG5ldyBEZXBlbmQoa2V5KVxuICAgICAgICAvLyDltYzlpZflr7nosaFcbiAgICAgICAgdmFyIGNoaWxkT2JqID0gY3JlYXRlT2JzZXJ2ZXIodmFsKVxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZGF0YSwga2V5LCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbT2JzZXJ2ZXIucHJvdG90eXBlXSBkZWZpbmVQcm9wZXJ0eTpEZXBlbmQud2F0Y2hlcicsIERlcGVuZC53YXRjaGVyKVxuICAgICAgICAgICAgICAgIGlmIChEZXBlbmQud2F0Y2hlcikge1xuICAgICAgICAgICAgICAgICAgICBkZXAuZGVwZW5kKClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKG5ld1ZhbCkge1xuICAgICAgICAgICAgICAgIGlmIChuZXdWYWwgPT09IHZhbCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFsID0gbmV3VmFsXG4gICAgICAgICAgICAgICAgY2hpbGRPYmogPSBjcmVhdGVPYnNlcnZlcihuZXdWYWwpXG4gICAgICAgICAgICAgICAgZGVwLm5vdGlmeSgpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfVxufVxuXG4vKipcbiAqIOWIm+W7uuaVsOaNruebkeWQrOWZqFxuICpcbiAqIEBwYXJhbSB2YWx1ZVxuICogQHJldHVybnMge09ic2VydmVyfVxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjcmVhdGVPYnNlcnZlcihkYXRhKSB7XG4gICAgaWYgKGRhdGEpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBPYnNlcnZlcihkYXRhKVxuICAgIH1cbn1cbiIsIi8qKlxuICogUGFyc2VyLmpzXG4gKlxuICog5oyH5Luk6Kej5p6Q5qih5Z2XKHYtdGV4dCx2LWh0bWwsdi1tb2RlbCx2LWNsYXNzLHYtb24pXG4gKlxuICogQ3JlYXRlZCBieSB4aWVwYW4gb24gMjAxNy8xLzEwIOS4i+WNiDE6MjUuXG4gKi9cbmltcG9ydCBVcGRhdGVyIGZyb20gXCIuL1VwZGF0ZXJcIjtcbmltcG9ydCBXYXRjaGVyIGZyb20gXCIuL1dhdGNoZXJcIjtcblxuXG52YXIgUGFyc2VycyA9IHtcbiAgICB0ZXh0OiBmdW5jdGlvbiAobm9kZSwgdm0sIGV4cCkge1xuICAgICAgICAvLyBjb25zb2xlLmxvZygnW0NvbXBpbGVyIERpcmVjdGl2ZVBhcnNlcnNdIHRleHQnKVxuICAgICAgICB0aGlzLl9iaW5kKG5vZGUsIHZtLCBleHAsICd0ZXh0JylcbiAgICB9LFxuICAgIGh0bWw6IGZ1bmN0aW9uIChub2RlLCB2bSwgZXhwKSB7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdbQ29tcGlsZXIgRGlyZWN0aXZlUGFyc2Vyc10gaHRtbCcpXG4gICAgICAgIHRoaXMuX2JpbmQobm9kZSwgdm0sIGV4cCwgJ2h0bWwnKVxuICAgIH0sXG4gICAgbW9kZWw6IGZ1bmN0aW9uIChub2RlLCB2bSwgZXhwKSB7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdbQ29tcGlsZXIgRGlyZWN0aXZlUGFyc2Vyc10gbW9kZWwnKVxuICAgICAgICB0aGlzLl9iaW5kKG5vZGUsIHZtLCBleHAsICdtb2RlbCcpXG5cbiAgICAgICAgdmFyIF90aGlzID0gdGhpcyxcbiAgICAgICAgICAgIHZhbCA9IHRoaXMuX2dldFZhbHVlKHZtLCBleHApXG4gICAgICAgIG5vZGUuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIG5ld1ZhbCA9IGUudGFyZ2V0LnZhbHVlXG4gICAgICAgICAgICBpZiAodmFsID09PSBuZXdWYWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF90aGlzLl9zZXRWYWx1ZSh2bSwgZXhwLCBuZXdWYWwpXG4gICAgICAgICAgICB2YWwgPSBuZXdWYWxcbiAgICAgICAgfSlcbiAgICB9LFxuICAgIGNsYXNzOiBmdW5jdGlvbiAobm9kZSwgdm0sIGV4cCkge1xuICAgICAgICB0aGlzLl9iaW5kKG5vZGUsIHZtLCBleHAsICdjbGFzcycpXG4gICAgfSxcbiAgICAvKipcbiAgICAgKiDosIPnlKggVXBkYXRlciDop4blm77liLfmlrDmqKHlnZflubbkuLrlhbbliJvlu7rmlbDmja7orqLpmIXmqKHlnZdcbiAgICAgKiBAcGFyYW0gbm9kZVxuICAgICAqIEBwYXJhbSB2bVxuICAgICAqIEBwYXJhbSBleHBcbiAgICAgKiBAcGFyYW0gZGlyXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfYmluZDogZnVuY3Rpb24gKG5vZGUsIHZtLCBleHAsIGRpcikge1xuICAgICAgICAvLyDmlbDmja7mm7TmlrDlh73mlbBcbiAgICAgICAgdmFyIHVwZGF0ZXJGbiA9IFVwZGF0ZXJbZGlyXVxuXG4gICAgICAgIGlmICh1cGRhdGVyRm4pIHtcbiAgICAgICAgICAgIC8ve25vZGUsdmFsdWV9XG4gICAgICAgICAgICAvLyDliJ3lp4vljJbop4blm75cbiAgICAgICAgICAgIHVwZGF0ZXJGbihub2RlLCB0aGlzLl9nZXRWYWx1ZSh2bSwgZXhwKSlcbiAgICAgICAgICAgIC8vIOWIm+W7uuaVsOaNruiuoumYheWZqOiuoumYheaVsOaNruWPmOWMlu+8jOabtOaWsOinhuWbvlxuICAgICAgICAgICAgbmV3IFdhdGNoZXIodm0sIGV4cCwgZnVuY3Rpb24gKHZhbCwgb2xkVmFsKSB7XG4gICAgICAgICAgICAgICAgdXBkYXRlckZuKG5vZGUsIHZhbCwgb2xkVmFsKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgIH0sXG4gICAgLyoqXG4gICAgICog5LqL5Lu25aSE55CGXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbm9kZSDoioLngrlcbiAgICAgKiBAcGFyYW0gdm0gQmluZGluZ+WunuS+i1xuICAgICAqIEBwYXJhbSBleHAg5pa55rOV5ZCNXG4gICAgICogQHBhcmFtIGRpciDmjIfku6TlkI3np7Ao5aaC77yab246Y2xpY2spXG4gICAgICovXG4gICAgX2V2ZW50SGFuZGxlcjogZnVuY3Rpb24gKG5vZGUsIHZtLCBleHAsIGRpcikge1xuICAgICAgICBjb25zb2xlLmxvZygnW0NvbXBpbGVyIERpcmVjdGl2ZVBhcnNlcnNdIGV2ZW50SGFuZGxlcicpXG4gICAgICAgIC8vIOS6i+S7tuexu+Wei++8jOWmgiBjbGljayDkuovku7ZcbiAgICAgICAgdmFyIGV2ZW50VHlwZSA9IGRpci5zcGxpdCgnOicpWzFdXG4gICAgICAgIC8vIOe7keWumueahOaWueazlVxuICAgICAgICB2YXIgZm4gPSB2bS4kb3B0aW9ucy5tZXRob2RzICYmIHZtLiRvcHRpb25zLm1ldGhvZHNbZXhwXVxuXG4gICAgICAgIC8vIOa3u+WKoOS6i+S7tuebkeWQrOWZqFxuICAgICAgICBpZiAoZXZlbnRUeXBlICYmIGZuKSB7XG4gICAgICAgICAgICBub2RlLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLCBmbi5iaW5kKHZtKSwgZmFsc2UpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoIWV2ZW50VHlwZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tCaW5kaW5nIGVycm9yXSBldmVudFR5cGUgYWZ0ZXIgOiBpcyBub3QgZGVmaW5lZCcpXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tCaW5kaW5nIGVycm9yXSBldmVudFxcJ3MgZnVuY3Rpb24gb3IgZnVuY3Rpb24gbmFtZSBpcyBub3QgZGVmaW5lZCcpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuICAgIF9nZXRWYWx1ZTogZnVuY3Rpb24gKHZtLCBleHApIHtcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ1tDb21waWxlciBEaXJlY3RpdmVQYXJzZXJzXSBfZ2V0Vk1WYWwnKVxuICAgICAgICB2YXIgdmFsID0gdm0uJGRhdGFcbiAgICAgICAgZXhwID0gZXhwLnNwbGl0KCcuJylcbiAgICAgICAgZXhwLmZvckVhY2goZnVuY3Rpb24gKGspIHtcbiAgICAgICAgICAgIHZhbCA9IHZhbFtrXVxuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gdmFsXG4gICAgfSxcblxuICAgIF9zZXRWYWx1ZTogZnVuY3Rpb24gKHZtLCBleHAsIHZhbHVlKSB7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdbQ29tcGlsZXIgRGlyZWN0aXZlUGFyc2Vyc10gX3NldFZNVmFsJylcbiAgICAgICAgdmFyIHZhbCA9IHZtLiRkYXRhXG4gICAgICAgIGV4cCA9IGV4cC5zcGxpdCgnLicpXG4gICAgICAgIGV4cC5mb3JFYWNoKGZ1bmN0aW9uIChrLCBpKSB7XG4gICAgICAgICAgICBpZiAoaSA8IGV4cC5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgICAgdmFsID0gdmFsW2tdXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhbFtrXSA9IHZhbHVlXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQYXJzZXJzIiwiLyoqXG4gKiBVcGRhdGVyLmpzXG4gKlxuICog6KeG5Zu+5Yi35paw5qih5Z2XXG4gKlxuICogQ3JlYXRlZCBieSB4aWVwYW4gb24gMjAxNy8xLzkg5LiL5Y2INDo1OS5cbiAqL1xuXG52YXIgVXBkYXRlciA9IHtcbiAgICB0ZXh0OiBmdW5jdGlvbiAobm9kZSwgdmFsdWUpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1tVcGRhdGVyXSB2LXRleHQnLCB2YWx1ZSlcbiAgICAgICAgbm9kZS50ZXh0Q29udGVudCA9IHR5cGVvZiB2YWx1ZSA9PSAndW5kZWZpbmVkJyA/ICcnIDogdmFsdWVcbiAgICB9LFxuICAgIGh0bWw6IGZ1bmN0aW9uIChub2RlLCB2YWx1ZSkge1xuICAgICAgICBjb25zb2xlLmxvZygnW1VwZGF0ZXJdIHYtaHRtbCcsIG5vZGUsIHZhbHVlKVxuICAgICAgICBub2RlLmlubmVySFRNTCA9IHR5cGVvZiB2YWx1ZSA9PSAndW5kZWZpbmVkJyA/ICcnIDogdmFsdWVcbiAgICB9LFxuICAgIGNsYXNzOiBmdW5jdGlvbiAobm9kZSwgdmFsdWUsIG9sZFZhbHVlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbVXBkYXRlcl0gdi1jbGFzcycsIG5vZGUsIG9sZFZhbHVlLCAnLT4nLCB2YWx1ZSlcbiAgICAgICAgdmFyIGNsYXNzTmFtZSA9IG5vZGUuY2xhc3NOYW1lXG4gICAgICAgIGNsYXNzTmFtZSA9IGNsYXNzTmFtZS5yZXBsYWNlKG9sZFZhbHVlLCAnJykucmVwbGFjZSgvXFxzJC8sICcnKVxuXG4gICAgICAgIHZhciBzcGFjZSA9IGNsYXNzTmFtZSAmJiBTdHJpbmcodmFsdWUpID8gJyAnIDogJydcbiAgICAgICAgbm9kZS5jbGFzc05hbWUgPSBjbGFzc05hbWUgKyBzcGFjZSArIHZhbHVlXG4gICAgfSxcbiAgICBtb2RlbDogZnVuY3Rpb24gKG5vZGUsIHZhbHVlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbVXBkYXRlcl0gdi1tb2RlbCcsIG5vZGUsIHZhbHVlKVxuICAgICAgICBub2RlLnZhbHVlID0gdHlwZW9mIHZhbHVlID09ICd1bmRlZmluZWQnID8gJycgOiB2YWx1ZVxuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgVXBkYXRlclxuIiwiLyoqXG4gKiBXYXRjaGVyLmpzIChzdWJzY3JpYmVyKVxuICpcbiAqIOaVsOaNruiuoumYheaooeWdl1xuICpcbiAqIENyZWF0ZWQgYnkgeGllcGFuIG9uIDIwMTcvMS85IOS4i+WNiDE6MzkuXG4gKi9cbmltcG9ydCBEZXBlbmQgZnJvbSBcIi4vRGVwZW5kXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFdhdGNoZXIodm0sIGV4cCwgY2FsbGJhY2spIHtcbiAgICBjb25zb2xlLmxvZygn5q2j5Zyo5Yib5bu6W+aVsOaNruiuoumYheWZqF0uLi4nLCAndm06Jywgdm0sICcgZXhwcmVzc2lvbjonLCBleHAsICcgY2FsbGJhY2s6JywgY2FsbGJhY2spXG5cbiAgICB0aGlzLnZtID0gdm1cbiAgICAvLyDmlbDmja7mm7TmlrDlm57osIPlh73mlbBcbiAgICB0aGlzLmNhbGxiYWNrID0gY2FsbGJhY2tcbiAgICAvLyDooajovr7lvI9cbiAgICB0aGlzLmV4cHJlc3Npb24gPSBleHBcbiAgICAvLyDkvp3otZYgaWRcbiAgICB0aGlzLmRlcElkcyA9IHt9XG4gICAgdGhpcy52YWx1ZSA9IHRoaXMuX2dldFZhbHVlKClcbn1cblxuV2F0Y2hlci5wcm90b3R5cGUgPSB7XG4gICAgdXBkYXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbV2F0Y2hlci5wcm90b3R5cGVdIHVwZGF0ZScpXG4gICAgICAgIHZhciB2YWx1ZSA9IHRoaXMuX2dldFZhbHVlKClcbiAgICAgICAgdmFyIG9sZFZhbHVlID0gdGhpcy52YWx1ZVxuICAgICAgICBpZiAodmFsdWUgIT09IG9sZFZhbHVlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnW1dhdGNoZXIucHJvdG90eXBlXSB2YWx1ZTonLCBvbGRWYWx1ZSwgJy0+JywgdmFsdWUpXG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWVcbiAgICAgICAgICAgIHRoaXMuY2FsbGJhY2suY2FsbCh0aGlzLnZtLCB2YWx1ZSwgb2xkVmFsdWUpXG4gICAgICAgIH1cbiAgICB9LFxuICAgIGFkZERlcGVuZDogZnVuY3Rpb24gKGRlcCkge1xuICAgICAgICBjb25zb2xlLmxvZygnW1dhdGNoZXIucHJvdG90eXBlXSBhZGREZXBlbmQnKVxuICAgICAgICBpZiAoIXRoaXMuZGVwSWRzLmhhc093blByb3BlcnR5KGRlcC5pZCkpIHtcbiAgICAgICAgICAgIGRlcC5hZGRXYXRjaGVyKHRoaXMpXG4gICAgICAgICAgICB0aGlzLmRlcElkc1tkZXAuaWRdID0gZGVwXG4gICAgICAgIH1cbiAgICB9LFxuICAgIF9iZWZvcmVHZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgRGVwZW5kLndhdGNoZXIgPSB0aGlzXG4gICAgICAgIGNvbnNvbGUubG9nKCdbV2F0Y2hlci5wcm90b3R5cGVdIF9iZWZvcmVHZXQgd2F0Y2hlcicsIHRoaXMpXG4gICAgfSxcbiAgICBfZ2V0VmFsdWU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5fYmVmb3JlR2V0KCk7XG4gICAgICAgIHZhciBleHAgPSB0aGlzLmV4cHJlc3Npb24uc3BsaXQoJy4nKVxuICAgICAgICB2YXIgdmFsID0gdGhpcy52bS4kZGF0YVxuICAgICAgICBleHAuZm9yRWFjaChmdW5jdGlvbiAoaykge1xuICAgICAgICAgICAgdmFsID0gdmFsW2tdXG4gICAgICAgIH0pXG4gICAgICAgIHRoaXMuX2FmdGVyR2V0KCk7XG4gICAgICAgIHJldHVybiB2YWxcbiAgICB9LFxuICAgIF9hZnRlckdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICBEZXBlbmQud2F0Y2hlciA9IG51bGxcbiAgICB9XG5cbn0iXX0="}